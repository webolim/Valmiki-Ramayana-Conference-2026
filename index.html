<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>WEBOLIM Sri Ramayana Satram 2026</title>
    <meta name="description" content="Join us for the Sri Ramayana Satram & Valmiki Ramayana Conference 2026. A spiritual journey through Recensions, Readings, and Commentaries of Valmiki Ramayana." />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://webolim.org/" />
    <meta property="og:title" content="WEBOLIM Sri Ramayana Satram 2026" />
    <meta property="og:description" content="Join us for the Sri Ramayana Satram & Valmiki Ramayana Conference 2026. A spiritual journey through Recensions, Readings, and Commentaries of Valmiki Ramayana." />
    <meta property="og:image" content="https://raw.githubusercontent.com/webolim/Valmiki-Ramayana-Conference-2026/studio/assets/social2.jpg" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://webolim.org/" />
    <meta property="twitter:title" content="WEBOLIM Sri Ramayana Satram 2026" />
    <meta property="twitter:description" content="Join us for the Sri Ramayana Satram & Valmiki Ramayana Conference 2026." />
    <meta property="twitter:image" content="https://raw.githubusercontent.com/webolim/Valmiki-Ramayana-Conference-2026/studio/assets/social2.jpg" />
    
    <!-- Preload Critical Hero Image -->
    <link rel="preload" as="image" href="https://raw.githubusercontent.com/webolim/Valmiki-Ramayana-Conference-2026/studio/assets/KalyanaRamar.gif">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts: Added Merriweather, Removed DM Serif Display -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Mukta:wght@300;400;600;800&family=Roboto:wght@300;400;500;700&family=Tiro+Devanagari+Sanskrit:ital@0;1&display=swap" rel="stylesheet">
    
    <!-- Icons (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Tailwind Config -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              maroon: '#800000',
              gold: '#D4AF37',
              cream: '#FFFDD0',
              deepGreen: '#228B22',
              saffron: '#FF9933',
              charcoal: '#333333',
            },
            fontFamily: {
              serif: ['"Merriweather"', '"Tiro Devanagari Sanskrit"', 'serif'],
              sans: ['Roboto', 'Mukta', 'sans-serif'], // Updated to Roboto
            },
            animation: {
              'spin-slow': 'spin 60s linear infinite',
              'spin-reverse-medium': 'spin-reverse 45s linear infinite',
              'spin-medium': 'spin 30s linear infinite',
              'pulse-fast': 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'flicker': 'flicker 2s infinite',
              'shimmer': 'shimmer 8s linear infinite',
              'twinkle': 'twinkle 4s ease-in-out infinite',
              'border-pulse': 'border-pulse 2s ease-in-out infinite',
            },
            keyframes: {
              'spin-reverse': {
                'from': { transform: 'rotate(360deg)' },
                'to': { transform: 'rotate(0deg)' },
              },
              'flicker': {
                '0%, 100%': { opacity: 1, transform: 'scale(1)' },
                '25%': { opacity: 0.9, transform: 'scale(0.98)' },
                '50%': { opacity: 0.85, transform: 'scale(0.96)' },
                '75%': { opacity: 0.95, transform: 'scale(0.99)' },
              },
              'shimmer': {
                '0%': { backgroundPosition: '0% 50%' },
                '50%': { backgroundPosition: '100% 50%' },
                '100%': { backgroundPosition: '0% 50%' },
              },
              'twinkle': {
                '0%, 100%': { opacity: 0.3, transform: 'scale(1)' },
                '50%': { opacity: 0.8, transform: 'scale(1.2)' },
              },
              'border-pulse': {
                '0%, 100%': { borderColor: 'rgba(212, 175, 55, 0.5)', boxShadow: '0 0 0px rgba(212, 175, 55, 0)' },
                '50%': { borderColor: 'rgba(212, 175, 55, 1)', boxShadow: '0 0 10px rgba(212, 175, 55, 0.4)' },
              }
            }
          },
        },
      }
    </script>

    <style>
      /* Smooth Scrolling Enabled */
      html {
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
      }

      .bio-scroll::-webkit-scrollbar { width: 6px; }
      .bio-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
      .bio-scroll::-webkit-scrollbar-thumb { background: #D4AF37; border-radius: 3px; }
      .bio-scroll::-webkit-scrollbar-thumb:hover { background: #800000; }
      
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

      /* Utility for hiding/showing elements smoothly */
      .fade-in { animation: fadeIn 0.5s ease-in; }
      @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

      /* Glittery Hero Background - Updated for lighter/redder top with Noise to prevent banding */
      .hero-glitter-bg {
          background-color: #2a0a0a;
          /* The URL is an SVG Noise filter to dither the gradient */
          background-image: 
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E"),
            radial-gradient(circle at 50% 30%, #a00000 0%, #850000 40%, #2a0a0a 100%);
          position: relative;
      }
      
      .hero-glitter-bg::before {
          content: "";
          position: absolute;
          top: 0; left: 0; width: 100%; height: 100%;
          background-image: 
              radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 3px),
              radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 2px),
              radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 3px);
          background-size: 350px 350px, 200px 200px, 150px 150px; /* Denser sparkles */
          background-position: 0 0, 40px 60px, 130px 270px;
          opacity: 0.4;
          animation: twinkle 5s infinite alternate;
      }
      
      .hero-glitter-bg::after {
          content: "";
          position: absolute;
          top: 0; left: 0; width: 100%; height: 100%;
          background: linear-gradient(125deg, rgba(255,255,255,0) 40%, rgba(212, 175, 55, 0.1) 50%, rgba(255,255,255,0) 60%);
          background-size: 200% 200%;
          animation: shimmer 6s infinite linear;
          pointer-events: none;
      }

      /* Mobile Menu Background with Noise to prevent banding */
      #mobile-menu {
          background-image: 
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E"),
            linear-gradient(rgba(128, 0, 0, 0.95), rgba(128, 0, 0, 0.95));
      }
      
      /* Hexagon Clip Path Utility */
      .hex-clip {
          clip-path: polygon(14px 0, calc(100% - 14px) 0, 100% 50%, calc(100% - 14px) 100%, 14px 100%, 0 50%);
      }

      /* Single Beam Rotating Border Animation - Hero Only */
      .hero-glow-border {
        position: relative;
        overflow: hidden; /* Changed to normal overflow for clip-path to work on parent? No, needs to be hidden for inner elements */
        border: none;
        box-shadow: 0 10px 30px -5px rgba(212, 175, 55, 0.5);
        transform: translateZ(0); 
        isolation: isolate;
      }
      
      /* Apply Hex Shape to Hero Button */
      .hero-glow-border.hex-clip {
        overflow: hidden;
        /* Box shadow gets clipped, so we can use filter drop-shadow on parent if needed, 
           but for now relying on the glow animation internal to it */
      }

      .hero-glow-border::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 300%; 
        height: 300%;
        /* Single tight beam gradient - Refined with buffer to prevent jump at 0/360 */
        background: conic-gradient(
            from 0deg, 
            #800000 0deg, 
            #800000 40deg, 
            #D4AF37 160deg, 
            #FFFDD0 180deg, 
            #D4AF37 200deg, 
            #800000 320deg, 
            #800000 360deg
        );
        animation: spin-gradient 4s linear infinite;
        transform: translate(-50%, -50%);
        will-change: transform;
        z-index: 0;
      }

      .hero-glow-border::after {
        content: '';
        position: absolute;
        inset: 1.5px; /* Thinner border */
        background: #800000;
        /* Inherit the clip path if applied to parent? No, standard rect. 
           But if parent is clipped, this is clipped. */
        border-radius: inherit;
        z-index: 0;
      }
      
      /* For Hex buttons, we need to ensure the inner bg respects the shape 
         Since inset is rect, we just let the parent clip it. 
         Visually it creates the border effect. */

      .hero-glow-border > * {
        position: relative;
        z-index: 1;
      }

      /* Diagonal Sheen for Conference Buttons */
      .sheen-bg {
        position: relative;
        overflow: hidden;
        background-color: #800000;
      }
      .sheen-bg::before {
        content: '';
        position: absolute;
        top: 0; left: 0; width: 200%; height: 100%;
        background: linear-gradient(120deg, transparent 30%, rgba(212, 175, 55, 0.4) 50%, transparent 70%);
        animation: shimmer 4s infinite linear;
        pointer-events: none;
      }

      /* Custom diagonal shape for conference buttons */
      .rounded-diagonal {
          border-radius: 15px 50px;
      }
      
      /* Reversed diagonal shape for second conference button */
      .rounded-diagonal-reverse {
          border-radius: 50px 15px;
      }

      @keyframes spin-gradient {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
      }
    </style>
</head>
<body class="bg-cream text-charcoal font-sans antialiased">

    <!-- INITIAL LOADING OVERLAY -->
    <div id="app-loader" class="fixed inset-0 z-[100] bg-cream flex flex-col items-center justify-center transition-opacity duration-700">
        <!-- Increased size from w-32 h-32 to w-64 h-64 -->
        <div class="relative w-64 h-64 mb-6">
            <div class="absolute inset-0 border-4 border-maroon/20 rounded-full"></div>
            <div class="absolute inset-0 border-4 border-gold border-t-transparent rounded-full animate-spin"></div>
            <!-- Logo Image -->
            <div class="absolute inset-0 flex items-center justify-center p-6">
                 <img src="https://raw.githubusercontent.com/webolim/Valmiki-Ramayana-Conference-2026/refs/heads/studio/assets/WEBOLIM_RGBLogo_20250521.gif" alt="Webolim" class="w-full h-full object-contain" />
            </div>
        </div>
        <p class="text-maroon font-serif font-bold text-lg tracking-widest animate-pulse">LOADING...</p>
    </div>

    <!-- FLOATING MENU BUTTON -->
    <button id="float-menu-btn" onclick="toggleMobileMenu(true)" class="fixed top-4 right-4 z-50 bg-black/20 backdrop-blur-md text-gold p-3 rounded-full border border-gold/20 shadow-lg hover:bg-black/40 transition-all duration-300">
        <i data-lucide="menu" class="w-6 h-6"></i>
    </button>

    <!-- MOBILE MENU OVERLAY - Removed bg-maroon/95 (moved to CSS) -->
    <div id="mobile-menu" class="fixed inset-0 z-[60] text-white flex flex-col items-center justify-center space-y-8 backdrop-blur-md hidden transition-opacity duration-300 opacity-0">
        <button onclick="toggleMobileMenu(false)" class="absolute top-6 right-6 text-white/80 hover:text-white">
            <i data-lucide="x" class="w-8 h-8"></i>
        </button>
        <a href="#hero" onclick="toggleMobileMenu(false)" class="text-2xl font-serif font-bold text-gold hover:text-white transition-colors">Home</a>
        <a href="javascript:void(0)" onclick="setDay(1); toggleMobileMenu(false)" class="text-2xl font-serif font-bold text-gold hover:text-white transition-colors">Schedule</a>
        <a href="#donate" onclick="toggleMobileMenu(false)" class="text-2xl font-serif font-bold text-gold hover:text-white transition-colors">Donate</a>
        <a href="#contact" onclick="toggleMobileMenu(false)" class="text-2xl font-serif font-bold text-gold hover:text-white transition-colors">Contact</a>
        <a href="https://docs.google.com/forms/d/" target="_blank" class="text-2xl font-serif font-bold text-gold flex items-center gap-2 bg-white/10 px-6 py-2 rounded-full border border-gold/50">
            Accommodation <i data-lucide="external-link" class="w-6 h-6"></i>
        </a>
    </div>

    <!-- MAIN APP STRUCTURE -->
    <main class="min-h-screen flex flex-col font-sans bg-cream relative">
        
        <!-- HERO SECTION -->
        <div id="hero" class="hero-glitter-bg relative w-full overflow-hidden text-gold min-h-[500px] md:min-h-screen lg:min-h-[700px] flex flex-col lg:flex-row items-center justify-center pt-12 pb-10 md:pt-8 md:pb-20 lg:pt-24 lg:pb-32 px-4 lg:px-16 gap-4 lg:gap-6">
            
            <!-- Pillars: Reduced width in mobile from w-8 to w-4 -->
            <div id="pillar-left" class="absolute left-0 top-0 h-full w-4 md:w-12 lg:w-16 bg-[length:100%_auto] bg-top bg-repeat-y z-0 opacity-90 drop-shadow-2xl pointer-events-none"></div>
            <div id="pillar-right" class="absolute right-0 top-0 h-full w-4 md:w-12 lg:w-16 bg-[length:100%_auto] bg-top bg-repeat-y z-0 opacity-90 drop-shadow-2xl pointer-events-none"></div>
            
            <!-- Left Column: Deity Image -->
            <div class="relative z-10 w-full lg:w-1/2 flex justify-center items-center order-1 lg:order-1">
                <div class="relative flex justify-center items-center w-fit mx-auto">
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[80vw] h-[80vw] md:w-[720px] md:h-[720px] lg:w-[600px] lg:h-[600px] pointer-events-none z-0">
                        <div class="w-full h-full animate-spin-slow rounded-full blur-[1px]" style="background: repeating-conic-gradient(from 0deg, rgba(255, 255, 255, 0.5) 0deg 15deg, transparent 15deg 30deg); mask-image: radial-gradient(circle, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 30%, rgba(0,0,0,0) 70%); -webkit-mask-image: radial-gradient(circle, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 30%, rgba(0,0,0,0) 70%);"></div>
                    </div>
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[60vw] h-[60vw] md:w-[550px] md:h-[550px] lg:w-[450px] lg:h-[450px] pointer-events-none z-0">
                        <div class="w-full h-full animate-spin-reverse-medium rounded-full blur-[1px]" style="background: repeating-conic-gradient(from 0deg, rgba(255, 255, 220, 0.4) 0deg 10deg, transparent 10deg 20deg); mask-image: radial-gradient(circle, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 30%, rgba(0,0,0,0) 70%); -webkit-mask-image: radial-gradient(circle, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 30%, rgba(0,0,0,0) 70%);"></div>
                    </div>
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[280px] h-[280px] md:w-[320px] md:h-[320px] lg:w-[300px] lg:h-[300px] bg-white/60 blur-[70px] rounded-full z-10"></div>
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[240px] h-[240px] md:w-[280px] md:h-[280px] lg:w-[260px] lg:h-[260px] bg-white/80 blur-[50px] rounded-full z-10 animate-pulse"></div>
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[180px] h-[180px] md:w-[220px] md:h-[220px] bg-white blur-[30px] rounded-full z-10"></div>
                    <img id="hero-img" class="h-[220px] md:h-[420px] lg:h-[480px] object-contain drop-shadow-[0_0_40px_rgba(255,255,255,0.6)] z-20 relative transform hover:scale-105 transition-transform duration-700" width="480" height="480" />
                </div>
            </div>

            <!-- Right Column: Content -->
            <div class="relative z-10 w-full lg:w-1/2 flex flex-col items-center lg:items-start text-center lg:text-left gap-3 md:gap-6 order-2 lg:order-2">
                <div class="space-y-2 md:space-y-4 w-full">
                    <p class="font-serif font-bold text-cream text-xs md:text-sm tracking-[0.3em] uppercase drop-shadow-md mb-2 opacity-90">Webolim Presents</p>
                    <h1 class="font-serif font-extrabold text-3xl md:text-6xl lg:text-5xl xl:text-6xl text-transparent bg-clip-text bg-gradient-to-r from-gold via-yellow-100 to-gold leading-tight drop-shadow-sm pb-1">
                        Sri Ramayana Satram & <br class="hidden lg:block"/> Valmiki Ramayana Conference 2026
                    </h1>
                    
                    <!-- Countdown Display -->
                    <div id="hero-countdown" class="flex flex-col items-center lg:items-start w-full my-3">
                        <!-- Populated by JS -->
                    </div>

                    <div class="flex items-center justify-center lg:justify-start gap-4 my-2 opacity-80">
                       <div class="h-[1px] w-8 md:w-12 bg-gold"></div>
                       <div class="h-1.5 w-1.5 md:h-2 md:w-2 rotate-45 bg-gold"></div>
                       <div class="h-[1px] w-8 md:w-12 bg-gold"></div>
                    </div>
                    <p class="font-sans text-cream text-base md:text-xl lg:text-2xl max-w-4xl lg:max-w-none font-medium leading-relaxed drop-shadow px-2 md:whitespace-nowrap lg:whitespace-normal opacity-95">Theme: Recensions / Readings and Commentaries of Valmiki Ramayana</p>
                </div>

                <!-- Dates - Updated layout: rounded-[2rem] for pre/post, rounded-lg for conference -->
                <div class="flex flex-row gap-1 md:gap-2 mt-5 md:mt-8 w-full max-w-full lg:max-w-xl px-0 mb-2 justify-between lg:justify-start items-stretch">
                    <div onclick="setDay(1)" class="flex-1 border border-gold/20 p-2 md:p-3 rounded-[2rem] flex flex-col items-center justify-center shadow-sm hover:shadow-md hover:bg-white/5 cursor-pointer transition-all duration-300 group hover:-translate-y-1 scale-95 opacity-90">
                        <span class="text-gold/80 font-bold text-[9px] sm:text-[10px] md:text-xs uppercase tracking-widest mb-1 group-hover:text-gold transition-colors text-center">Pre-Conference</span>
                        <span class="text-cream text-xs sm:text-sm md:text-xl font-serif font-bold tracking-tight whitespace-nowrap">Mar 28 – Apr 3</span>
                    </div>
                    
                    <!-- Hero Conference Button: Reduced width by changing flex-[1.5] to flex-1 or specific width class -->
                    <div onclick="setDay(8)" class="flex-1 hero-glow-border rounded-lg p-2 md:p-3 flex flex-col items-center justify-center shadow-lg hover:shadow-xl scale-100 md:scale-105 z-10 cursor-pointer transition-all duration-300 hover:-translate-y-1">
                        <div class="relative z-10 flex flex-col items-center justify-center">
                            <span class="text-gold font-bold text-[10px] sm:text-xs md:text-sm uppercase tracking-widest mb-1 transition-colors text-center">Conference</span>
                            <span class="text-white text-sm sm:text-lg md:text-3xl font-serif font-extrabold tracking-tight drop-shadow-[0_2px_4px_rgba(0,0,0,0.3)] whitespace-nowrap">Apr 4 – 5</span>
                        </div>
                    </div>

                    <div onclick="setDay(10)" class="flex-1 border border-gold/20 p-2 md:p-3 rounded-[2rem] flex flex-col items-center justify-center shadow-sm hover:shadow-md hover:bg-white/5 cursor-pointer transition-all duration-300 group hover:-translate-y-1 scale-95 opacity-90">
                        <span class="text-gold/80 font-bold text-[9px] sm:text-[10px] md:text-xs uppercase tracking-widest mb-1 group-hover:text-gold transition-colors text-center">Post-Conference</span>
                        <span class="text-cream text-xs sm:text-sm md:text-xl font-serif font-bold tracking-tight whitespace-nowrap">Apr 6 – 7</span>
                    </div>
                </div>

                <!-- Welcome Text -->
                <p class="font-serif italic text-cream text-base md:text-lg mt-4 mb-6 tracking-wide drop-shadow-md opacity-90">
                    All are welcome
                </p>

                <!-- Buttons (Swapped) -->
                <div class="flex flex-col md:flex-row gap-3 md:gap-4 w-full justify-center lg:justify-start items-center z-20 px-4 lg:px-0">
                    <a id="hero-location-trigger" href="https://maps.app.goo.gl/x5cT4fMKbuzQKkBJ8" target="_blank" class="group relative flex items-center justify-center gap-2 bg-charcoal/80 hover:bg-black/90 backdrop-blur-sm text-cream py-2.5 md:py-3 px-6 rounded-full border border-gold/30 transition-all hover:border-gold hover:scale-105 shadow-md w-full md:w-auto">
                        <i data-lucide="map-pin" class="w-4 h-4 text-gold group-hover:animate-bounce"></i>
                        <span class="text-sm md:text-base font-medium tracking-wide">Srimad Valmiki Ashrama</span>
                    </a>
                    <a href="https://docs.google.com/forms/d/" target="_blank" class="flex items-center justify-center gap-2 bg-gold hover:bg-yellow-400 text-maroon py-2.5 md:py-3 px-6 md:px-8 rounded-full font-bold text-sm md:text-base shadow-lg hover:scale-105 transition-all w-full md:w-auto">
                        Accommodation Registration <i data-lucide="external-link" class="w-4 h-4"></i>
                    </a>
                </div>
            </div>
        </div>

        <!-- STICKY HEADER & STEPPER - RESTORED Sticky Brand Header -->
        <div id="sticky-header" class="sticky top-0 z-40 bg-gold/95 backdrop-blur-md border-b border-gold/30 shadow-md transition-all duration-300">
            <!-- Brand Bar (Revealed on Scroll) -->
            <div id="sticky-brand" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="overflow-hidden transition-all duration-500 ease-in-out bg-maroon border-b border-gold/20 max-h-0 opacity-0 cursor-pointer">
                <div class="container mx-auto px-4 py-3 flex items-center justify-between">
                    <div class="flex items-center gap-2 md:gap-4 overflow-hidden w-full md:w-auto">
                        <img id="sticky-logo" class="h-10 md:h-12 w-auto object-contain flex-shrink-0" />
                        <div class="flex flex-col md:flex-row md:items-baseline md:gap-2 overflow-hidden">
                            <span class="font-serif font-extrabold text-gold text-base md:text-2xl leading-tight drop-shadow-sm whitespace-nowrap truncate">Sri Ramayana Satram</span>
                            <span class="font-serif font-extrabold text-gold/90 text-lg md:text-2xl leading-tight">& Conference 2026</span>
                        </div>
                    </div>
                    <button onclick="event.stopPropagation(); toggleMobileMenu(true)" class="text-gold p-2 hover:bg-white/10 rounded-full transition-colors flex-shrink-0 ml-2">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>

            <!-- Day Stepper -->
            <div class="w-full bg-transparent relative z-30 group">
                
                <!-- Left Gradient & Arrow -->
                <div id="stepper-left-grad" class="absolute left-0 top-0 bottom-0 w-24 bg-gradient-to-r from-gold to-transparent z-20 pointer-events-none transition-opacity duration-300 opacity-0"></div>
                <button 
                    id="stepper-prev"
                    onclick="navigateDay(-1)"
                    class="absolute left-2 top-1/2 -translate-y-1/2 z-30 bg-maroon text-gold border border-gold/50 p-2 rounded-full shadow-lg transition-all duration-300 hover:scale-110 opacity-0 pointer-events-none"
                >
                    <i data-lucide="chevron-left" class="w-6 h-6"></i>
                </button>

                <!-- Right Gradient & Arrow -->
                <div id="stepper-right-grad" class="absolute right-0 top-0 bottom-0 w-24 bg-gradient-to-l from-gold to-transparent z-20 pointer-events-none transition-opacity duration-300 opacity-0"></div>
                <button 
                    id="stepper-next"
                    onclick="navigateDay(1)"
                    class="absolute right-2 top-1/2 -translate-y-1/2 z-30 bg-maroon text-gold border border-gold/50 p-2 rounded-full shadow-lg transition-all duration-300 hover:scale-110 opacity-0 pointer-events-none"
                >
                    <i data-lucide="chevron-right" class="w-6 h-6"></i>
                </button>

                <!-- Update gap to 1. Reduced padding from py-4 to py-2 -->
                <div id="day-stepper-container" class="flex overflow-x-auto no-scrollbar py-2 px-4 gap-1 items-stretch w-full relative z-10" style="scroll-snap-type: x mandatory;">
                    <!-- JS will populate this -->
                </div>
            </div>
        </div>

        <!-- SCHEDULE SECTIONS CONTAINER -->
        <div id="schedule-container">
            <!-- All days will be rendered here vertically -->
        </div>

        <!-- DONATION -->
        <section id="donate" class="py-16 bg-maroon text-cream scroll-mt-48">
            <div class="container mx-auto px-4 max-w-4xl">
                <h2 class="font-serif text-3xl text-center font-bold text-gold mb-8">Support WEBOLIM</h2>
                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <div class="bg-white/10 p-6 rounded-2xl border border-gold/30 text-center flex flex-col items-center">
                        <h3 class="text-xl font-bold mb-4">Make a Contribution</h3>
                        <div class="hidden md:block bg-white p-2 rounded-lg mb-4">
                            <div class="w-48 h-48 bg-gray-100 flex items-center justify-center text-charcoal text-xs p-2 text-center">
                                <img src="https://raw.githubusercontent.com/webolim/Valmiki-Ramayana-Conference-2026/refs/heads/studio/assets/QR.png" alt="UPI QR" class="w-full h-full object-contain" />
                            </div>
                        </div>
                        <p class="hidden md:block text-sm opacity-80 mb-4">Scan with any UPI App</p>
                        <a href="upi://pay?pa=qr919443887456-9830@unionbankofindia&pn=WEBOLIM%20TRUST&cu=INR" class="md:hidden w-full bg-gold text-maroon font-bold py-4 rounded-xl flex items-center justify-center gap-2 shadow-lg animate-pulse">
                            <i data-lucide="qr-code" class="w-5 h-5"></i> Donate via UPI App
                        </a>
                        <p class="mt-4 text-xs p-2 text-left w-full opacity-80"><span class="font-bold text-gold">Note:</span> All donations to WEBOLIM Trust are eligible for tax exemption under Section 80G.</p>
                    </div>
                    <div class="space-y-6 mt-2">
                        <h3 class="text-lg font-bold text-gold opacity-90">For NEFT / RTGS use the following details</h3>
                        <div class="p-4 rounded-xl">
                            <h4 class="font-bold text-xl text-gold flex items-center gap-2 mb-3">UNION BANK OF INDIA</h4>
                            <div class="space-y-2 text-base md:text-lg font-mono opacity-90 pl-1">
                                <p>Acct Name: WEBOLIM TRUST</p>
                                <p>Acct No: <span class="text-white font-bold select-all">520101257799830</span></p>
                                <p>IFSC: <span class="text-white font-bold select-all">UBIN0912883</span></p>
                                <p>MICR: <span class="text-white font-bold select-all">562026356</span></p>
                                <p>Branch: Jigani</p>
                            </div>
                        </div>
                        <div class="p-4 rounded-xl">
                            <h4 class="font-bold text-xl text-gold flex items-center gap-2 mb-3">City Union Bank Ltd (CUB)</h4>
                            <div class="space-y-2 text-base md:text-lg font-mono opacity-90 pl-1">
                                <p>Acct Name: WEBOLIM TRUST</p>
                                <p>Acct No: <span class="text-white font-bold select-all">500101013583858</span></p>
                                <p>IFSC: <span class="text-white font-bold select-all">CIUB0000583</span></p>
                                <p>MICR: <span class="text-white font-bold select-all">560054026</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FOOTER -->
        <footer id="contact" class="bg-charcoal text-cream py-16 scroll-mt-48 border-t-4 border-maroon">
            <div class="container mx-auto px-6 md:px-8 flex flex-col md:flex-row justify-between items-center gap-10">
                <div class="flex items-center justify-center">
                    <img id="footer-logo" class="h-24 md:h-32" />
                </div>
                <div class="flex flex-col md:flex-row gap-6 md:gap-12 text-base md:text-lg text-center md:text-left font-medium">
                    <a href="tel:+919369637283" class="flex items-center justify-center gap-3 hover:text-gold transition-colors text-cream"><i data-lucide="phone" class="w-5 h-5 text-gold"></i> <span>+91 93696 37283</span></a>
                    <a href="mailto:webolimclasses@gmail.com" class="flex items-center justify-center gap-3 hover:text-gold transition-colors text-cream"><i data-lucide="mail" class="w-5 h-5 text-gold"></i> <span>webolimclasses@gmail.com</span></a>
                    <a href="https://webolim.org" target="_blank" class="flex items-center justify-center gap-3 hover:text-gold transition-colors text-cream"><i data-lucide="globe" class="w-5 h-5 text-gold"></i> <span>webolim.org</span></a>
                </div>
                <div class="text-xs md:text-sm text-white/40 mt-4 md:mt-0">&copy; 2026 WEBOLIM Trust.</div>
            </div>
        </footer>
    </main>

    <!-- APPLICATION LOGIC & DATA -->
    <script>
        // Data populated from JSON
        let ASSETS = {};
        let SCHEDULE_DATA = {};
        let SPEAKERS = {}; // Stores the speaker dictionary
        let EVENT_START_DATE;
        let EVENT_END_DATE;

        // --- VISUAL CONFIGURATION (EDIT HERE) ---
        // Define distinct gradients for different types of days
        const GRADIENTS = {
            // Day 1: Inauguration (Grand start - Peach/Gold/Red)
            INAUGURATION: "linear-gradient(180deg, rgba(217, 244, 255, 1) 0%, rgba(217, 244, 255, 1) 20%, rgba(255, 233, 196, 1) 50%, rgba(47, 69, 102, 1) 99%, rgba(255, 206, 191, 1) 100%)",
            
            // Days 8 & 9: Conference (Professional/Rich - Cream/Gold/Brown)
            CONFERENCE: "linear-gradient(180deg, rgba(255, 253, 208, 1) 0%, rgba(255, 248, 225, 1) 30%, rgba(255, 236, 179, 1) 70%, rgba(93, 64, 55, 0.9) 100%)",
            
            // Day 11: Valedictory (Conclusion - Soft Sunset/Peaceful)
            VALEDICTORY: "linear-gradient(180deg, rgba(255, 206, 191, 1) 0%, rgba(186, 231, 255, 1) 10%, rgba(217, 244, 255, 1) 100%)",
            
            // Default: All other Pre/Post Conference Days (The multi-color flow you provided)
            DEFAULT: "linear-gradient(180deg, rgba(255, 206, 191, 1) 0%, rgba(186, 231, 255, 1) 10%, rgba(217, 244, 255, 1) 60%, rgba(255, 233, 196, 1) 80%, rgba(47, 69, 102, 1) 99%, rgba(255, 206, 191, 1) 100%)"
        };
        
        const SCHEDULE_BG_COLOR = "#ffcebf"; 

        // --- 1. UTILS ---
        const getCurrentISTTime = () => {
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const istOffset = 5.5 * 60 * 60000;
            return new Date(utc + istOffset);
        };

        const getYouTubeButtonState = (event, currentTime) => {
            if (!event.youtubeLink) return 'hidden';
            // Use pre-calculated timestamps for performance
            if (event._liveStartTs && event._endTs) {
                const nowTs = currentTime.getTime();
                if (nowTs < event._liveStartTs) return 'disabled';
                if (nowTs >= event._liveStartTs && nowTs <= event._endTs) return 'live';
                return 'recording';
            }
            // Fallback (should not happen after preprocessing)
            return 'recording';
        };

        // --- 2. RENDER FUNCTIONS ---
        let currentDayId = 1;
        let isScrolling = false;
        let isStepperInit = false;

        function initImages() {
            if(document.getElementById('pillar-left')) document.getElementById('pillar-left').style.backgroundImage = `url('${ASSETS.pillarLeft}')`;
            if(document.getElementById('pillar-right')) document.getElementById('pillar-right').style.backgroundImage = `url('${ASSETS.pillarRight}')`;
            if(document.getElementById('hero-img')) document.getElementById('hero-img').src = ASSETS.heroImage;
            if(document.getElementById('sticky-logo')) document.getElementById('sticky-logo').src = ASSETS.logo;
            if(document.getElementById('footer-logo')) document.getElementById('footer-logo').src = ASSETS.logo;
        }

        function preprocessScheduleData() {
            if (!SCHEDULE_DATA.days) return;
            
            // --- NEW: Hydrate events with speaker videos ---
            // Create a map of events for O(1) lookup
            const eventMap = {};
            SCHEDULE_DATA.days.forEach(day => {
                day.events.forEach(event => {
                    eventMap[event.id] = event;
                });
            });

            // Iterate speakers and inject videos from their profile
            if (SPEAKERS) {
                Object.values(SPEAKERS).forEach(speaker => {
                    if (speaker.videos) {
                        Object.entries(speaker.videos).forEach(([eventId, url]) => {
                            if (eventMap[eventId]) {
                                eventMap[eventId].youtubeLink = url;
                            }
                        });
                    }
                });
            }
            // ------------------------------------------------

            SCHEDULE_DATA.days.forEach(day => {
                day.events.forEach(event => {
                    if(event.youtubeLink) {
                        // Parse Start Time
                        const [time, modifier] = event.startTime.split(' ');
                        let [hours, minutes] = time.split(':').map(Number);
                        if (hours === 12) hours = 0;
                        if (modifier === 'PM') hours += 12;

                        // Parse End Time
                        const [endTime, endModifier] = event.endTime.split(' ');
                        let [endHours, endMinutes] = endTime.split(':').map(Number);
                        if (endHours === 12) endHours = 0;
                        if (endModifier === 'PM') endHours += 12;

                        // Parse Date components manually to avoid browser inconsistencies and Timezone issues
                        // day.date is YYYY-MM-DD
                        const [y, m, d] = day.date.split('-').map(Number);
                        
                        // Construct UTC Timestamps matching the "Fake IST" logic of getCurrentISTTime
                        // getCurrentISTTime returns (RealUTC + 5.5h).
                        // So we create a UTC date that represents the Event Time (e.g. 16:30) as if it were UTC.
                        // 16:30 IST is 11:00 UTC. 11:00 UTC + 5.5h = 16:30.
                        // So using Date.UTC(y, m-1, d, hours, minutes) gives us the timestamp for 16:30 UTC, 
                        // which matches the numeric value of the "Fake IST" timestamp.
                        
                        event._startTs = Date.UTC(y, m - 1, d, hours, minutes);
                        event._endTs = Date.UTC(y, m - 1, d, endHours, endMinutes);
                        
                        // Live starts 15 mins before
                        event._liveStartTs = event._startTs - (15 * 60000); 
                    }
                });
            });
        }

        function initDayStepper() {
            const container = document.getElementById('day-stepper-container');
            if(!container || isStepperInit) return;
            
            // Initial Render of all buttons
            container.innerHTML = SCHEDULE_DATA.days.map(day => {
                // Determine shape based on phase
                const isConference = day.phase === 'Conference';
                // Updated default to rounded-diagonal or rounded-full
                let shapeClass = 'rounded-full';
                if (isConference) {
                    // Check if it's the second conference day (Day 9) for reverse shape
                    shapeClass = (day.dayNumber === 9) ? 'rounded-diagonal-reverse' : 'rounded-diagonal';
                }

                // Initial classes will be set by updateStepperVisuals immediately after
                // Note: The structure here supports both regular buttons and train-animated buttons
                // The class assignment happens in updateStepperVisuals
                // REDUCED: py-4 to py-2
                return `
                    <button 
                        onclick="setDay(${day.dayNumber})"
                        id="day-btn-${day.dayNumber}"
                        class="flex-shrink-0 flex flex-col items-center justify-center py-2 ${shapeClass} transition-all duration-300 snap-center cursor-pointer relative"
                    >
                        <div class="relative z-10 flex flex-col items-center justify-center w-full">
                            <div id="day-conf-corner-${day.dayNumber}" class="absolute top-[-10px] right-[-10px] w-4 h-4 bg-gold/40 rounded-bl-full hidden"></div>
                            <div class="flex items-baseline gap-1 leading-none mb-0">
                                <span id="day-month-${day.dayNumber}" class="text-xs md:text-sm font-bold tracking-wider uppercase"></span>
                                <span id="day-date-${day.dayNumber}" class="text-3xl md:text-4xl font-serif font-bold"></span>
                                <span id="day-name-${day.dayNumber}" class="text-xs md:text-sm font-bold tracking-wider uppercase"></span>
                            </div>
                            <span id="day-theme-${day.dayNumber}" class="text-xs md:text-sm font-bold uppercase tracking-wide text-center w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 mt-0"></span>
                        </div>
                    </button>
                `;
            }).join('');
            isStepperInit = true;
            updateStepperVisuals();
        }

        function updateStepperVisuals() {
            const container = document.getElementById('day-stepper-container');
            if(!container) return;

            SCHEDULE_DATA.days.forEach(day => {
                const btn = document.getElementById(`day-btn-${day.dayNumber}`);
                if (!btn) return;

                const isActive = day.dayNumber === currentDayId;
                const isConference = day.phase === 'Conference';
                const [month, dateStr] = day.displayDate.split(' ');
                const shortDayName = day.dayName.substring(0, 3).toUpperCase();
                
                // Base Classes
                // REDUCED: py-4 to py-2
                let classes = "flex-shrink-0 flex flex-col items-center justify-center py-2 transition-all duration-300 snap-center cursor-pointer relative ";
                
                // Shape Logic
                if (isConference) {
                    if (day.dayNumber === 9) classes += "rounded-diagonal-reverse ";
                    else classes += "rounded-diagonal ";
                } else {
                    classes += "rounded-full ";
                }

                // Sizing Logic - Increased width to prevent text clipping
                if (isActive) {
                    classes += "min-w-[160px] md:min-w-[180px] scale-100 z-10 ";
                } else {
                    classes += "min-w-[145px] md:min-w-[155px] scale-90 opacity-80 ";
                }

                // Border & Background Logic
                if (isConference) {
                    // Added sheen-bg for conference
                    if (isActive) {
                         // Active Conference: Maroon background with Gold border + Sheen
                        classes += "sheen-bg border-2 border-gold text-white shadow-xl ";
                    } else {
                         // Inactive Conference: Cream background with Maroon border
                        classes += "bg-cream border-2 border-maroon text-maroon hover:shadow-md ";
                    }
                } else {
                    // Non-Conference
                    if (isActive) {
                        // Active Regular: Dark Green Bg with Gold Border
                        classes += "bg-[#1b4d1b] border-2 border-gold text-white shadow-lg ";
                    } else {
                         // Inactive Regular: White bg, Maroon Border
                         classes += "bg-white border-2 border-maroon text-gray-500 hover:bg-gray-50 hover:shadow-sm ";
                    }
                }

                btn.className = classes;

                // Text Colors
                const monthColor = isActive ? 'text-gold' : (isConference ? 'text-maroon' : 'text-gray-400');
                const dateColor = isActive ? 'text-white' : (isConference ? 'text-maroon' : 'text-gray-800');
                const dayColor = isActive ? 'text-gray-300' : (isConference ? 'text-maroon/80' : 'text-gray-400');
                const themeColor = isActive ? 'text-gold' : (isConference ? 'text-maroon' : 'text-gray-600');

                // Update Text Content & Classes safely - REDUCED FONT SIZES
                // Labels: text-[10px] md:text-xs (was text-xs md:text-sm)
                // Date: text-2xl md:text-3xl (was text-3xl md:text-4xl)
                document.getElementById(`day-month-${day.dayNumber}`).className = `text-[10px] md:text-xs font-bold tracking-wider uppercase ${monthColor}`;
                document.getElementById(`day-month-${day.dayNumber}`).textContent = month.substring(0,3);

                document.getElementById(`day-date-${day.dayNumber}`).className = `text-2xl md:text-3xl font-serif font-bold ${dateColor}`;
                document.getElementById(`day-date-${day.dayNumber}`).textContent = dateStr;

                document.getElementById(`day-name-${day.dayNumber}`).className = `text-[10px] md:text-xs font-bold tracking-wider uppercase ${dayColor}`;
                document.getElementById(`day-name-${day.dayNumber}`).textContent = shortDayName;

                document.getElementById(`day-theme-${day.dayNumber}`).className = `text-[10px] md:text-xs font-bold uppercase tracking-wide text-center w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 mt-0 ${themeColor}`;
                document.getElementById(`day-theme-${day.dayNumber}`).textContent = day.theme;

                // Corner decoration - restored for rectangle conference buttons
                const corner = document.getElementById(`day-conf-corner-${day.dayNumber}`);
                if (corner) {
                    if (!isActive && isConference) corner.classList.remove('hidden');
                    else corner.classList.add('hidden');
                }
            });

            // Scroll active into view
            const activeBtn = document.getElementById(`day-btn-${currentDayId}`);
            if (activeBtn) {
                 const scrollLeft = activeBtn.offsetLeft - container.offsetWidth / 2 + activeBtn.offsetWidth / 2;
                 container.scrollTo({ left: scrollLeft, behavior: 'smooth' });
            }
            updateStepperArrows();
        }

        window.navigateDay = function(direction) {
            const nextDayId = currentDayId + direction;
            if (nextDayId >= 1 && nextDayId <= SCHEDULE_DATA.days.length) {
                setDay(nextDayId);
            }
        };

        function updateStepperArrows() {
            const prevBtn = document.getElementById('stepper-prev');
            const nextBtn = document.getElementById('stepper-next');
            const leftGrad = document.getElementById('stepper-left-grad');
            const rightGrad = document.getElementById('stepper-right-grad');
            
            if (!prevBtn || !nextBtn) return;

            const hasPrev = currentDayId > 1;
            const hasNext = currentDayId < SCHEDULE_DATA.days.length;

            if (hasPrev) {
                prevBtn.classList.remove('opacity-0', 'pointer-events-none');
                prevBtn.classList.add('opacity-100', 'pointer-events-auto');
                if(leftGrad) leftGrad.classList.add('opacity-100');
            } else {
                prevBtn.classList.add('opacity-0', 'pointer-events-none');
                prevBtn.classList.remove('opacity-100', 'pointer-events-auto');
                if(leftGrad) leftGrad.classList.remove('opacity-100');
            }

            if (hasNext) {
                nextBtn.classList.remove('opacity-0', 'pointer-events-none');
                nextBtn.classList.add('opacity-100', 'pointer-events-auto');
                if(rightGrad) rightGrad.classList.add('opacity-100');
            } else {
                nextBtn.classList.add('opacity-0', 'pointer-events-none');
                nextBtn.classList.remove('opacity-100', 'pointer-events-auto');
                if(rightGrad) rightGrad.classList.remove('opacity-100');
            }
        }

        function renderCountdown() {
            const heroCountdown = document.getElementById('hero-countdown');
            const currentTime = getCurrentISTTime();
            
            if (currentTime >= EVENT_START_DATE && currentTime <= EVENT_END_DATE) {
                if (heroCountdown) heroCountdown.innerHTML = '';
                return;
            }
            if (currentTime > EVENT_END_DATE) {
                 if (heroCountdown) heroCountdown.innerHTML = '';
                 return;
            }

            const diff = EVENT_START_DATE.getTime() - currentTime.getTime();
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            if (heroCountdown) {
                heroCountdown.innerHTML = `
                    <div class="flex flex-col items-center lg:items-start">
                        <div class="text-gold/80 font-bold uppercase text-xs md:text-sm tracking-widest mb-2">Starts In</div>
                        <div class="flex gap-4 md:gap-6 text-gold/90 font-serif">
                            <div class="flex flex-col items-center"><span class="text-3xl md:text-4xl font-bold leading-none">${String(days).padStart(2, '0')}</span><span class="text-[10px] uppercase tracking-widest text-cream/80 font-bold">Days</span></div>
                            <span class="text-2xl md:text-3xl opacity-40">:</span>
                            <div class="flex flex-col items-center"><span class="text-3xl md:text-4xl font-bold leading-none">${String(hours).padStart(2, '0')}</span><span class="text-[10px] uppercase tracking-widest text-cream/80 font-bold">Hours</span></div>
                            <span class="text-2xl md:text-3xl opacity-40">:</span>
                            <div class="flex flex-col items-center"><span class="text-3xl md:text-4xl font-bold leading-none">${String(minutes).padStart(2, '0')}</span><span class="text-[10px] uppercase tracking-widest text-cream/80 font-bold">Mins</span></div>
                            <span class="text-2xl md:text-3xl opacity-40 hidden md:inline">:</span>
                            <div class="flex flex-col items-center hidden md:flex"><span class="text-3xl md:text-4xl font-bold leading-none text-white">${String(seconds).padStart(2, '0')}</span><span class="text-[10px] uppercase tracking-widest text-cream/80 font-bold">Secs</span></div>
                        </div>
                    </div>
                `;
            }
        }

        function renderAllDays() {
            const container = document.getElementById('schedule-container');
            if(!container) return;
            
            container.innerHTML = SCHEDULE_DATA.days.map(day => {
                const isConference = day.phase === 'Conference';
                
                // Background & Styles
                // Determine which gradient to use
                let bgGradient = GRADIENTS.DEFAULT;
                if (day.dayNumber === 1) bgGradient = GRADIENTS.INAUGURATION;
                else if (day.dayNumber === 11) bgGradient = GRADIENTS.VALEDICTORY;
                else if (day.phase === 'Conference') bgGradient = GRADIENTS.CONFERENCE;

                // Noise Pattern (Shared)
                // iOS FIX: Use %22 (URL encoded double quotes) inside the string to prevent unescaped single quote syntax errors in style attribute
                const noiseUrl = "url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22 opacity=%220.05%22/%3E%3C/svg%3E')";
                
                // Unified background gradient logic
                const sectionStyle = `background-image: ${noiseUrl}, ${bgGradient}; background-color: ${SCHEDULE_BG_COLOR};`;

                // Icon
                const iconSrc = isConference ? ASSETS.timelineConference : ASSETS.timelineSatram;

                // Events List
                const eventsHtml = day.events.map((event, index) => {
                    const hasVideo = !!event.youtubeLink;
                    const eventSpeakers = (event.speakerIds || []).map(id => SPEAKERS[id]).filter(Boolean);
                    
                    const isFirst = index === 0;
                    const isLast = index === day.events.length - 1;
                    const roundedClass = (isFirst ? 'rounded-t-2xl md:rounded-t-3xl ' : '') + (isLast ? 'rounded-b-2xl md:rounded-b-3xl ' : '');

                    const hideVenueTitles = ['Sandhyavandanam', 'Madyanikam', 'Madhyanikam', 'Meditation'];
                    const isGenericVenue = !event.venue || event.venue === 'Venue';
                    const showVenue = !isGenericVenue && !hideVenueTitles.includes(event.title);

                    return `
                        <div id="event-${event.id}" class="${roundedClass} group relative p-6 md:p-8 flex flex-row gap-4 md:gap-8 bg-white/95 backdrop-blur-xl hover:bg-white transition-colors duration-300">
                            <!-- Live Badge (Floating Mobile) -->
                            <div id="event-live-${event.id}" class="hidden absolute top-4 right-4 md:static md:hidden flex items-center gap-1 bg-red-600 text-white text-[10px] font-bold px-2 py-0.5 rounded-full animate-pulse z-10"><span class="w-1.5 h-1.5 bg-white rounded-full"></span> LIVE</div>

                            <!-- Time Column - Unified Layout (Left Side) -->
                            <div class="w-20 md:w-32 shrink-0 flex flex-col items-start md:items-end justify-start gap-0.5 text-maroon/80 font-bold font-sans">
                                <span class="text-base md:text-xl leading-tight">${event.startTime}</span>
                                <span class="text-xs md:text-sm text-gray-500 leading-tight">${event.endTime}</span>
                                <!-- Desktop Live Badge (Hidden by default, JS toggles) -->
                                <div id="event-live-desktop-${event.id}" class="hidden mt-2 items-center gap-1 bg-red-600 text-white text-[10px] font-bold px-2 py-0.5 rounded-full animate-pulse"><span class="w-1.5 h-1.5 bg-white rounded-full"></span> LIVE</div>
                            </div>

                            <!-- Content Column -->
                            <div class="flex-1 min-w-0 flex flex-col gap-2">
                                <div>
                                    <h3 class="text-xl md:text-2xl font-serif font-bold text-gray-900 leading-tight mb-1 group-hover:text-maroon transition-colors">${event.title}</h3>
                                    ${showVenue ? `<div class="flex items-center gap-2 text-xs md:text-sm font-medium text-gray-500"><i data-lucide="map-pin" class="w-3 h-3 md:w-4 md:h-4 text-gold"></i> ${event.venue}</div>` : ''}
                                </div>
                                
                                <!-- Speakers -->
                                ${eventSpeakers.length > 0 ? `
                                    <div class="flex flex-col gap-6 mt-3 mb-2">
                                        ${eventSpeakers.map(s => {
                                            // Determine alignment: Center if no bio (Pre/Post), Start if bio (Conference)
                                            const hasBio = event.isConference && s.bio;
                                            // UPDATED: items-start for mobile default (left align), sm:items-center for desktop if no bio (center vertical)
                                            const alignClass = hasBio ? 'items-start' : 'items-start sm:items-center';
                                            
                                            return `
                                            <div class="flex flex-col sm:flex-row ${alignClass} gap-4">
                                                <img src="${s.photo}" alt="${s.name}" class="w-36 h-36 md:w-40 md:h-40 rounded-xl object-cover border border-gold/30 shadow-sm shrink-0 bg-gray-100">
                                                <div class="flex flex-col">
                                                    <p class="font-bold text-maroon text-base md:text-lg leading-tight mb-1">${s.name}</p>
                                                    ${hasBio ? `<p class="text-sm md:text-base text-gray-700 leading-relaxed">${s.bio}</p>` : ''}
                                                </div>
                                            </div>
                                            `;
                                        }).join('')}
                                    </div>
                                ` : ''}

                                <!-- Buttons -->
                                ${hasVideo ? `
                                    <div class="mt-2">
                                        <a id="event-btn-${event.id}" href="${event.youtubeLink}" target="_blank" class="inline-flex items-center gap-2 px-5 py-2.5 rounded-full font-bold text-sm transition-all shadow-sm bg-gray-100 text-gray-600 hover:bg-gold hover:text-maroon hover:shadow-md">
                                            <i data-lucide="youtube" class="w-4 h-4"></i> Watch Recording
                                        </a>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    `;
                }).join('');

                return `
                    <section id="day-section-${day.dayNumber}" class="py-12 md:py-20 relative transition-colors duration-500" style="${sectionStyle}">
                        <div class="container mx-auto px-4 md:px-8 max-w-4xl relative z-10">
                            <!-- Day Header -->
                            <div class="text-center mb-8 md:mb-12">
                                <img src="${iconSrc}" class="w-12 h-12 md:w-16 md:h-16 mx-auto mb-4 object-contain drop-shadow-md opacity-90" />
                                <span class="inline-block px-4 py-1 rounded-full text-xs md:text-sm font-bold uppercase tracking-wider mb-3 ${isConference ? 'bg-gold/20 text-maroon' : 'bg-green-800/10 text-deepGreen'} backdrop-blur-sm border border-black/5 shadow-sm">${day.phase}</span>
                                <h2 class="font-serif text-3xl md:text-5xl text-maroon font-extrabold mb-2 drop-shadow-sm">${day.theme}</h2>
                                <div class="flex items-center justify-center gap-3 text-gray-800 font-medium text-lg md:text-xl opacity-80">
                                    <span>${day.dayName}</span>
                                    <span class="w-1.5 h-1.5 rounded-full bg-gold"></span>
                                    <span>${day.displayDate}, 2026</span>
                                </div>
                            </div>
                            
                            <!-- The Single Card -->
                            <div class="rounded-2xl md:rounded-3xl shadow-2xl border border-white/40 overflow-hidden ring-1 ring-black/5 transform-gpu isolate">
                                <div class="flex flex-col gap-[2px] bg-transparent">
                                    ${eventsHtml || '<div class="text-center py-12 text-gray-400 italic bg-white/95 backdrop-blur-xl rounded-2xl md:rounded-3xl">Schedule details coming soon.</div>'}
                                </div>
                            </div>
                        </div>
                    </section>
                `;
            }).join('');
            
            lucide.createIcons();
        }
        
        function updateLiveStatus() {
            // Optimized logic to update existing buttons without full re-render
            const days = SCHEDULE_DATA.days;
            const now = getCurrentISTTime();
            let hasChanges = false;
            
            days.forEach(day => {
                day.events.forEach(event => {
                    if(!event.youtubeLink) return;
                    
                    const ytState = getYouTubeButtonState(event, now);
                    const btn = document.getElementById(`event-btn-${event.id}`);
                    const badge = document.getElementById(`event-live-${event.id}`);
                    const badgeDesktop = document.getElementById(`event-live-desktop-${event.id}`);
                    const row = document.getElementById(`event-${event.id}`);
                    
                    if (btn) {
                        const currentStatus = btn.getAttribute('data-status');
                        if (currentStatus !== ytState) {
                            hasChanges = true;
                            btn.setAttribute('data-status', ytState);

                            if (ytState === 'live') {
                                 btn.className = "inline-flex items-center gap-2 px-5 py-2.5 rounded-full font-bold text-sm transition-all shadow-md bg-red-600 text-white hover:bg-red-700 animate-pulse";
                                 btn.innerHTML = '<i data-lucide="play" class="w-4 h-4"></i> Watch LIVE Now';
                                 if(row) {
                                     // Remove default card bg classes and add live bg classes
                                     row.classList.remove('bg-white/95', 'hover:bg-white');
                                     row.classList.add('bg-red-50/95');
                                 }
                            } else if (ytState === 'disabled') {
                                 btn.className = "inline-flex items-center gap-2 px-5 py-2.5 rounded-full font-bold text-sm transition-all shadow-none bg-gray-100 text-gray-400 cursor-not-allowed pointer-events-none";
                                 btn.innerHTML = '<i data-lucide="youtube" class="w-4 h-4"></i> Coming Soon';
                                 if(row) {
                                     // Restore default card bg classes
                                     row.classList.remove('bg-red-50/95');
                                     row.classList.add('bg-white/95', 'hover:bg-white');
                                 }
                            } else {
                                 btn.className = "inline-flex items-center gap-2 px-5 py-2.5 rounded-full font-bold text-sm transition-all shadow-sm bg-gray-100 text-gray-600 hover:bg-gold hover:text-maroon hover:shadow-md";
                                 btn.innerHTML = '<i data-lucide="youtube" class="w-4 h-4"></i> Watch Recording';
                                 if(row) {
                                     // Restore default card bg classes
                                     row.classList.remove('bg-red-50/95');
                                     row.classList.add('bg-white/95', 'hover:bg-white');
                                 }
                            }
                        }
                    }
                    // Badge Toggling
                    const shouldBeVisible = (ytState === 'live');
                    [badge, badgeDesktop].forEach(b => {
                        if(b) {
                            const isVisible = !b.classList.contains('hidden');
                            if(isVisible !== shouldBeVisible) {
                                if(shouldBeVisible) {
                                    b.classList.remove('hidden');
                                    // If it's the desktop badge, make sure it displays inline-flex
                                    if(b.id.includes('desktop')) b.classList.add('inline-flex');
                                } else {
                                    b.classList.add('hidden');
                                    if(b.id.includes('desktop')) b.classList.remove('inline-flex');
                                }
                            }
                        }
                    });
                });
            });
            if (hasChanges) lucide.createIcons();
        }

        window.setDay = function(dayId) {
            // Scroll to specific day
            isScrolling = true;
            currentDayId = dayId;
            updateStepperVisuals(); // Update UI immediately
            
            const el = document.getElementById(`day-section-${dayId}`);
            if (el) {
                const headerOffset = 140; // REDUCED header offset
                const elementPosition = el.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                window.scrollTo({ top: offsetPosition, behavior: "smooth" });
                setTimeout(() => { isScrolling = false; }, 1000);
            } else {
                isScrolling = false;
            }
        }

        window.toggleMobileMenu = function(show) {
            const menu = document.getElementById('mobile-menu');
            const floatBtn = document.getElementById('float-menu-btn');
            if (show) {
                menu.classList.remove('hidden');
                setTimeout(() => menu.classList.remove('opacity-0'), 10);
                floatBtn.classList.add('opacity-0', 'pointer-events-none');
            } else {
                menu.classList.add('opacity-0');
                setTimeout(() => menu.classList.add('hidden'), 300);
                floatBtn.classList.remove('opacity-0', 'pointer-events-none');
            }
        }

        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Fetch Schedule Data
                const response = await fetch('schedule.json');
                const data = await response.json();
                
                ASSETS = data.assets;
                SCHEDULE_DATA = data.schedule;
                SPEAKERS = data.speakers; // Load speakers
                EVENT_START_DATE = new Date(data.config.eventStartDate);
                EVENT_END_DATE = new Date(data.config.eventEndDate);

                initImages();
                preprocessScheduleData(); // Pre-calculate timestamps for performance
                
                // Calculate current day
                const now = getCurrentISTTime();
                const todayStr = now.toISOString().split('T')[0];
                const foundDay = SCHEDULE_DATA.days.find(d => d.date === todayStr);
                if (foundDay) currentDayId = foundDay.dayNumber;

                renderAllDays(); // Render ALL days vertically
                initDayStepper(); // Init Stepper HTML once
                renderCountdown();
                updateLiveStatus(); // Initial live status check

                // Initial Scroll to Today
                setTimeout(() => {
                    if(currentDayId > 1) window.setDay(currentDayId);
                }, 500);

                // Intersection Observer for Scroll Spy
                const observer = new IntersectionObserver((entries) => {
                    if (isScrolling) return; // Don't update while animating scroll
                    
                    // Use a 'thin line' approach. Any element intersecting the "top strip" of the viewport is the active one.
                    const visibleEntries = entries.filter(e => e.isIntersecting).sort((a,b) => b.intersectionRatio - a.intersectionRatio);
                    
                    if(visibleEntries.length > 0) {
                        const id = visibleEntries[0].target.id;
                        const num = parseInt(id.replace('day-section-', ''));
                        if(!isNaN(num) && num !== currentDayId) {
                            currentDayId = num;
                            updateStepperVisuals(); // Update classes smoothly
                        }
                    }
                }, { 
                    // Adjusted for mobile scrolling detection: Top 10% ignored, bottom 50% ignored.
                    // This focuses detection on the upper half of the screen.
                    rootMargin: '-10% 0px -50% 0px', 
                    threshold: 0
                });

                SCHEDULE_DATA.days.forEach(d => {
                    const el = document.getElementById(`day-section-${d.dayNumber}`);
                    if(el) observer.observe(el);
                });

                // Setup Stepper Arrows Scroll Logic
                const stepperContainer = document.getElementById('day-stepper-container');
                if(stepperContainer) {
                    stepperContainer.addEventListener('scroll', updateStepperArrows);
                    window.addEventListener('resize', updateStepperArrows);
                }

                // Sticky Header Observer - RESTORED Logic
                const stickyObserver = new IntersectionObserver(([entry]) => {
                    const brand = document.getElementById('sticky-brand');
                    const floatBtn = document.getElementById('float-menu-btn');
                    if (entry.boundingClientRect.top < 0 && !entry.isIntersecting) {
                        brand.classList.remove('max-h-0', 'opacity-0');
                        brand.classList.add('max-h-24', 'opacity-100');
                        floatBtn.classList.add('opacity-0', 'pointer-events-none');
                    } else {
                        brand.classList.add('max-h-0', 'opacity-0');
                        brand.classList.remove('max-h-24', 'opacity-100');
                        floatBtn.classList.remove('opacity-0', 'pointer-events-none');
                    }
                }, { threshold: 0 });
                
                const trigger = document.getElementById('hero-location-trigger');
                if(trigger) stickyObserver.observe(trigger);

                // Live Update Timer
                setInterval(() => {
                    updateLiveStatus();
                    renderCountdown();
                }, 1000);

                // Hide Loader with animation
                const loader = document.getElementById('app-loader');
                if (loader) {
                    loader.classList.add('opacity-0', 'pointer-events-none');
                    setTimeout(() => loader.remove(), 700);
                }

            } catch (error) {
                console.error("Failed to load schedule data:", error);
                const loader = document.getElementById('app-loader');
                if(loader) {
                    loader.innerHTML = `
                        <div class="text-center p-4">
                            <i data-lucide="alert-circle" class="w-12 h-12 text-red-600 mx-auto mb-4"></i>
                            <p class="text-maroon font-bold text-xl mb-4">Unable to load schedule data</p>
                            <button onclick="location.reload()" class="px-6 py-2 bg-maroon text-cream rounded-full font-bold shadow-lg hover:scale-105 transition-transform">
                                Retry
                            </button>
                        </div>`;
                    lucide.createIcons();
                }
            }
        });

    </script>
</body>
</html>
