<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sri Ramayana Satram & Conference 2026 | WEBOLIM</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:ital,wght@0,700;0,900;1,700&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #B8860B;
            --maroon: #5D0E11;
            --slate-border: #E2E8F0;
            --text-main: #1E293B;
            --text-muted: #64748B;
            --bg-page: #FFFFFF;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-page);
            color: var(--text-main);
            scroll-behavior: smooth;
        }

        .font-display { font-family: 'Playfair Display', serif; }

        /* --- PILLARS --- */
        .pillar {
            position: fixed;
            top: 0;
            bottom: 0;
            width: 15px; /* Mobile width */
            z-index: 60;
            background-repeat: repeat-y;
            background-size: 100% auto;
            pointer-events: none;
            display: none;
        }
        body.is-conference .pillar {
            display: block;
        }
        
        .pillar-left {
            left: 0;
            /* Using Right Pillar reflected for Left */
            background-image: url('https://raw.githubusercontent.com/webolim/Valmiki-Ramayana-Conference-2026/main/Pillar-right.png');
            transform: scaleX(-1); 
            border-right: 2px solid var(--gold);
        }

        .pillar-right {
            right: 0;
            background-image: url('https://raw.githubusercontent.com/webolim/Valmiki-Ramayana-Conference-2026/main/Pillar-right.png');
            border-left: 2px solid var(--gold);
        }

        @media (min-width: 768px) {
            .pillar { width: 30px; }
        }

        /* --- HERO --- */
        .hero-bg {
            background: linear-gradient(rgba(93, 14, 17, 0.95), rgba(93, 14, 17, 0.95)), url('https://images.unsplash.com/photo-1542332213-31f87348057f?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
        }

        /* Deities & Animations */
        .chakra-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 140%;
            height: 140%;
            background: radial-gradient(circle, rgba(184, 134, 11, 0.4) 0%, rgba(184, 134, 11, 0) 70%);
            z-index: -1;
            animation: pulse-glow 4s ease-in-out infinite;
        }

        .chakra-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%; /* Adjust based on container */
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cg transform='translate(100,100)'%3E%3Ccircle r='90' fill='none' stroke='%23B8860B' stroke-width='2' stroke-dasharray='10 10' opacity='0.5'/%3Ccircle r='70' fill='none' stroke='%23B8860B' stroke-width='1' stroke-dasharray='5 5' opacity='0.3'/%3Cpath d='M0 -95 L10 -80 L0 -85 L-10 -80 Z' fill='%23B8860B' opacity='0.8'/%3C/g%3E%3C/svg%3E");
            background-position: center;
            background-repeat: no-repeat;
            background-size: contain;
            transform: translate(-50%, -50%);
            animation: spin-slow 60s linear infinite;
            z-index: -1;
        }

        @keyframes spin-slow { from { transform: translate(-50%, -50%) rotate(0deg); } to { transform: translate(-50%, -50%) rotate(360deg); } }
        @keyframes pulse-glow { 0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); } 50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.1); } }

        .falling-flower {
            position: absolute;
            top: -20px;
            width: 15px;
            height: 15px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FCD34D'%3E%3Cpath d='M12 2C13.1 5.5 16 8 20 9C16 10 13.1 12.5 12 16C10.9 12.5 8 10 4 9C8 8 10.9 5.5 12 2Z'/%3E%3C/svg%3E");
            background-size: contain;
            opacity: 0.6;
            pointer-events: none;
            z-index: 20;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to { transform: translateY(110vh) rotate(720deg); }
        }

        /* --- THEMES --- */
        body.is-conference { 
            background-color: #FFF9E3; 
            color: #5D0E11; 
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
        }
        body.is-conference .speaker-card { background: rgba(255, 255, 255, 0.6); border: 1px solid rgba(93, 14, 17, 0.2); border-radius: 1.5rem; }
        body.is-conference #header-bg-text { color: #5D0E11; opacity: 0.05; }
        body.is-conference .meta-text.time-text { color: #B8860B; }
        body.is-conference .meta-text.loc-text { color: #5D0E11; }

        /* --- DAY STEPPER NAV --- */
        .step-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 1px solid var(--slate-border);
            background: white;
            color: var(--text-muted);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            flex-shrink: 0;
        }
        .step-btn:hover:not(:disabled) {
            border-color: var(--gold);
            color: var(--gold);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(184, 134, 11, 0.1);
        }
        .step-btn:disabled {
            opacity: 0.2;
            cursor: not-allowed;
        }
        
        body.is-conference .step-btn {
            background: rgba(93, 14, 17, 0.05);
            border-color: rgba(93, 14, 17, 0.1);
            color: #5D0E11;
        }
        body.is-conference .step-btn:hover:not(:disabled) {
            background: #5D0E11;
            color: #FFF9E3;
            border-color: #5D0E11;
        }

        /* --- TIMELINE VISUALS --- */
        .timeline-wrapper { 
            position: relative; 
            padding-left: 10px;
        }

        .timeline-item { 
            display: grid; 
            grid-template-columns: 36px 1fr; 
            gap: 16px; 
            position: relative; 
            z-index: 1;
        }

        .timeline-visual { 
            position: relative; 
            display: flex; 
            justify-content: center; 
            padding-top: 10px; 
        }

        /* Base Line Structure */
        .timeline-visual::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            z-index: 0;
            top: 0;
            bottom: 0;
            width: 4px;
        }

        .timeline-item:first-child .timeline-visual::before {
            top: 10px; 
        }

        .timeline-item:last-child .timeline-visual::before {
            height: 10px;
            bottom: auto;
        }

        /* CONFERENCE STYLE: Golden Chain */
        .timeline-visual.type-conference::before {
            background: repeating-linear-gradient(
                0deg,
                #B8860B,
                #B8860B 4px,
                #FCE7A4 5px,
                #B8860B 6px
            );
            border-radius: 2px;
            box-shadow: 1px 0 4px rgba(0,0,0,0.3);
        }

        /* SATRAM STYLE: Green Vine */
        .timeline-visual.type-satram::before {
            background: repeating-linear-gradient(
                45deg,
                #4d7c0f,
                #65a30d 10px,
                #365314 20px
            );
            border-radius: 4px;
            box-shadow: inset 1px 1px 2px rgba(0,0,0,0.2);
        }

        /* --- NODES --- */

        /* 1. DIYA NODE (Conference) */
        .diya-node {
            width: 24px;
            height: 12px; /* Bowl shape */
            background: linear-gradient(to bottom, #FFD700, #B8860B);
            border-radius: 0 0 24px 24px;
            position: relative;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            border: 1px solid #8B4500;
        }
        .diya-node::before { /* Chain link */
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 10px;
            background: #B8860B;
        }
        .diya-flame {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 14px;
            background: radial-gradient(ellipse at bottom, #FFFF00, #FF4500);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            filter: drop-shadow(0 0 2px #FF4500);
            opacity: 0.9;
        }
        .diya-node.active {
            box-shadow: 0 0 15px #FFD700;
            border-color: #FFD700;
        }
        .diya-node.active .diya-flame {
            opacity: 1;
            box-shadow: 0 0 15px #FF4500, 0 0 30px #FFD700;
            animation: flicker 0.1s infinite alternate;
        }

        /* 2. FLOWER NODE (Satram) */
        .flower-node {
            width: 28px;
            height: 28px;
            position: relative;
            z-index: 10;
            margin-top: -4px; /* Adjust vertical alignment */
        }
        .flower-node::before { /* Stem */
            content: '';
            position: absolute;
            top: -6px; /* Connect to vine above */
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 10px;
            background: #4d7c0f;
        }
        .flower-head {
            width: 100%;
            height: 100%;
            /* Marigold SVG */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%23ea580c' stroke='%23c2410c' stroke-width='2' d='M50 10 C60 10 65 20 75 15 C85 10 90 25 90 35 C90 45 100 50 90 60 C80 70 85 85 75 90 C65 95 60 85 50 90 C40 95 35 85 25 90 C15 85 20 70 10 60 C0 50 10 45 10 35 C10 25 15 10 25 15 C35 20 40 10 50 10 Z'/%3E%3Ccircle cx='50' cy='50' r='20' fill='%23f97316' stroke='%23c2410c' stroke-width='1' stroke-dasharray='4 2'/%3E%3Ccircle cx='50' cy='50' r='10' fill='%23fde047'/%3E%3C/svg%3E");
            background-size: contain;
            background-repeat: no-repeat;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.2));
            transition: transform 0.3s ease;
        }
        .flower-node.active .flower-head {
             filter: drop-shadow(0 0 10px #ec4899);
             animation: bloom 2s infinite alternate;
        }

        @keyframes flicker {
            0% { transform: translateX(-50%) scale(1); opacity: 0.9; }
            100% { transform: translateX(-50%) scale(1.1); opacity: 1; }
        }
        @keyframes bloom {
            from { transform: scale(1.1); }
            to { transform: scale(1.25); }
        }

        /* --- TYPOGRAPHY & CARDS --- */
        .meta-text { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.15em; display: inline-block; }
        .time-text { color: var(--gold); }
        .loc-text { color: var(--maroon); }

        .event-name { font-size: 1.25rem; font-weight: 800; color: inherit; line-height: 1.2; margin-bottom: 0.5rem; letter-spacing: -0.02em; }

        .speaker-card { 
            display: flex; 
            flex-direction: column;
            gap: 1.25rem; 
            align-items: flex-start; 
            margin-top: 0.5rem; 
            padding: 0; 
            background: transparent; 
            border: none;
            box-shadow: none;
        }
        @media (min-width: 640px) {
            .speaker-card { flex-direction: row; }
        }
        .speaker-photo { 
            width: 56px; 
            height: 56px; 
            border-radius: 1rem; 
            object-fit: cover; 
            background: #f1f5f9; 
            border: 2px solid white; 
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); 
            flex-shrink: 0; 
        }
        .speaker-info { flex: 1; }
        .bio-text { color: var(--text-muted); font-size: 0.9rem; line-height: 1.7; font-weight: 400; }
        body.is-conference .bio-text { color: rgba(93, 14, 17, 0.8); }

        .phase-badge { font-size: 0.65rem; padding: 0.25rem 0.6rem; border-radius: 999px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge-pre { background: #fee2e2; color: #991b1b; }
        .badge-main { background: #fef3c7; color: #92400e; }
        .badge-post { background: #f1f5f9; color: #475569; }

        /* --- STICKY NAV --- */
        .sticky-nav {
            position: sticky;
            top: 0;
            z-index: 50; /* Below pillars */
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--slate-border);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05);
            transition: all 0.3s ease;
        }
        body.is-conference .sticky-nav {
            background: rgba(255, 249, 227, 0.95);
            border-bottom-color: rgba(93, 14, 17, 0.1);
        }

        .yt-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.75rem;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #ef4444; /* YouTube Red */
            transition: all 0.2s;
        }
        .yt-link:hover { opacity: 0.8; transform: translateX(2px); }
        body.is-conference .yt-link { color: #5D0E11; }
        
        .nav-btn-icon { width: 1.5rem; height: 1.5rem; }

    </style>
</head>
<body class="antialiased pb-20">

    <!-- Pillars -->
    <div class="pillar pillar-left"></div>
    <div class="pillar pillar-right"></div>

    <!-- Grand Hero -->
    <section class="hero-bg text-white py-16 px-6 md:px-12 overflow-hidden relative z-10" id="hero-section">
        <!-- Pushpavrishti Container -->
        <div id="flower-rain" class="absolute inset-0 pointer-events-none overflow-hidden z-20"></div>

        <div class="max-w-7xl mx-auto flex flex-col xl:flex-row items-center gap-12 relative z-30">
            <!-- Text Content -->
            <div class="flex-1 text-center xl:text-left z-30">
                <div class="inline-block px-4 py-1.5 bg-gold/20 border border-gold/30 rounded-full mb-6">
                    <p class="text-gold font-bold uppercase tracking-[0.2em] text-[10px]">WEBOLIM PRESENTS</p>
                </div>
                <h1 class="font-display text-4xl md:text-6xl lg:text-7xl font-black leading-[0.95] mb-6 tracking-tighter">
                    Sri Ramayana <br>
                    Satram <span class="text-gold">&</span><br>
                    Valmiki Ramayana <br>
                    <span class="text-gold">Conference 2026</span>
                </h1>
                <p class="text-lg md:text-xl text-slate-200 font-medium max-w-xl leading-snug mx-auto xl:mx-0">
                    Recensions / Readings and Commentaries of Valmiki Ramayana
                </p>
            </div>

            <!-- Central Deities Visual -->
            <div class="relative w-64 md:w-[30rem] lg:w-[40rem] xl:w-[35rem] shrink-0 z-10 order-first xl:order-none mb-8 xl:mb-0">
                <div class="chakra-glow"></div>
                <div class="chakra-ring"></div>
                <img src="https://raw.githubusercontent.com/webolim/Valmiki-Ramayana-Conference-2026/main/KalyanaRamar_Lowres.png" 
                     alt="Kalyana Rama Sannidhi" 
                     class="relative z-10 w-full drop-shadow-2xl filter brightness-110 contrast-110">
            </div>

            <!-- Overview Card -->
            <div class="w-full xl:w-[420px] shrink-0 z-30">
                <div class="bg-white/5 backdrop-blur-3xl p-8 rounded-[2rem] border border-white/20 shadow-2xl">
                    <div class="grid grid-cols-3 gap-2 mb-8">
                        <!-- Pre Satram -->
                        <div class="flex flex-col items-center justify-center p-2 rounded-xl hover:bg-white/5 transition text-center border border-transparent hover:border-white/10">
                            <span class="text-[9px] font-black uppercase tracking-[0.1em] text-slate-400 mb-1">Pre-Satram</span>
                            <p class="text-2xl font-black text-gold leading-tight">Mar 28<br>– Apr 03</p>
                        </div>
                        
                        <!-- Main Conference Highlight -->
                        <div class="flex flex-col items-center justify-center p-2 bg-gold/10 border border-gold/30 rounded-xl shadow-[0_0_15px_rgba(184,134,11,0.1)] text-center relative z-10 transform scale-105">
                            <span class="text-[9px] font-black uppercase tracking-[0.1em] text-gold mb-1">Conference</span>
                            <p class="text-3xl font-black text-gold leading-tight">Apr 04<br>– 05</p>
                        </div>

                        <!-- Post Satram -->
                        <div class="flex flex-col items-center justify-center p-2 rounded-xl hover:bg-white/5 transition text-center border border-transparent hover:border-white/10">
                            <span class="text-[9px] font-black uppercase tracking-[0.1em] text-slate-400 mb-1">Post-Satram</span>
                            <p class="text-2xl font-black text-gold leading-tight">Apr 06<br>– 07</p>
                        </div>
                    </div>

                    <!-- Details Section -->
                    <div class="pt-8 border-t border-white/10 space-y-6">
                        <div>
                            <p class="text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-2">Venue</p>
                            <p class="text-xs font-bold leading-relaxed text-slate-100">
                                Srimad Valmiki Ashrama WEBOLIM,<br>
                                Survey No. 11/3, Ragihalli Village,<br>
                                Bengaluru, Karnataka 560083
                            </p>
                        </div>
                        <div class="p-4 bg-white/5 rounded-2xl border border-white/10">
                            <p class="text-[10px] font-black uppercase tracking-[0.2em] text-gold mb-2">Accommodation & Food</p>
                            <p class="text-xs text-slate-300 mb-3 leading-relaxed">
                                Please register in advance by calling, emailing, or filling the form.
                            </p>
                            <div class="space-y-2">
                                <p class="text-xs font-bold text-white flex items-center gap-2">
                                    <span class="text-gold">T:</span> 9369637283
                                </p>
                                <p class="text-xs font-bold text-white flex items-center gap-2">
                                    <span class="text-gold">E:</span> webclasses@gmail.com
                                </p>
                                <a href="#" class="inline-block mt-1 text-[10px] font-bold uppercase tracking-wider text-white bg-gold/20 hover:bg-gold/30 border border-gold/40 px-3 py-1.5 rounded-lg transition-colors">
                                    Registration Form
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Static Month/Year Header -->
    <header class="pt-12 pb-4 px-10 md:px-16">
        <div class="max-w-4xl mx-auto">
            <h1 id="header-bg-text" class="text-slate-200 font-black text-6xl md:text-8xl uppercase tracking-tighter opacity-20 select-none">March 2026</h1>
            
            <div class="flex flex-col md:flex-row md:items-center gap-3 mt-4">
                <div class="flex items-center gap-3">
                    <span id="phase-badge" class="phase-badge badge-pre">Pre-Conference Satram</span>
                    <span class="hidden md:inline text-slate-300">|</span>
                </div>
                <span id="phase-label" class="meta-text !mb-0 text-gold font-bold leading-relaxed block md:inline-block">Recensions / Readings and Commentaries of Valmiki Ramayana</span>
            </div>
        </div>
    </header>

    <!-- Sticky Day Navigation -->
    <nav class="sticky-nav py-4 px-10 md:px-16">
        <div class="max-w-4xl mx-auto">
            <div class="relative z-10">
                <div class="flex items-center justify-between gap-6">
                    <button id="prev-day-btn" onclick="prevDay()" class="step-btn" title="Previous Day" aria-label="Previous Day">
                        <svg class="nav-btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                    </button>
                    
                    <div class="text-center flex-1 px-4">
                        <p id="day-theme-title" class="text-slate-400 font-bold uppercase tracking-[0.15em] text-[10px] md:text-xs mb-1">Day 01 • Inauguration Day</p>
                        <h2 id="current-day-display" class="font-display text-2xl md:text-5xl font-bold leading-tight">Saturday, Mar 28</h2>
                    </div>

                    <button id="next-day-btn" onclick="nextDay()" class="step-btn" title="Next Day" aria-label="Next Day">
                        <svg class="nav-btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Content Area -->
    <main class="py-12 px-10 md:px-16">
        <div class="max-w-4xl mx-auto">
            <div class="timeline-wrapper" id="main-timeline">
                <!-- Timeline injected here -->
            </div>
        </div>
    </main>

    <footer class="py-20 px-6 border-t border-[#5D0E11] text-center bg-[#5D0E11] text-slate-300">
        <p class="font-display text-2xl text-slate-400 mb-2">WEBOLIM</p>
        <p class="text-[10px] text-slate-400 uppercase tracking-[0.3em] font-bold">Valmiki Ramayana Conference No. 3</p>
        <div class="mt-8 text-slate-400 text-xs flex flex-col items-center gap-2">
            <p>Srimad Valmiki Ashrama WEBOLIM</p>
            <p>Survey No. 11/3, Ragihalli Village, Bengaluru-560083</p>
        </div>
    </footer>

    <script>
        let activeDayIndex = 0;
        let scheduleData = [];

        async function initializeApp() {
            const timeline = document.getElementById('main-timeline');
            timeline.innerHTML = '<p class="text-center text-lg font-semibold text-slate-500 py-16">Loading schedule...</p>';

            try {
                const response = await fetch('schedule.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                scheduleData = await response.json();

                renderDay(getInitialDayIndex());
                initFlowerRain();
                // Refresh every minute to check for live status
                setInterval(() => renderDay(activeDayIndex), 60000);

            } catch (error) {
                console.error("Could not load schedule data:", error);
                timeline.innerHTML = `<div class="text-center py-16">
                    <p class="text-lg font-bold text-red-600">Failed to Load Schedule</p>
                    <p class="text-slate-500 mt-2">We're having trouble fetching the conference schedule. Please check your internet connection and try again.</p>
                </div>`;
            }
        }

        function parseEventTime(timeStr, dayDate) {
            const year = 2026;
            const dateParts = dayDate.split(', ')[1].split(' '); 
            const monthMap = { "Mar": 2, "Apr": 3 };
            const month = monthMap[dateParts[0]];
            const day = parseInt(dateParts[1]);
            const times = timeStr.toLowerCase().split(' - ');
            
            function convertTo24h(t) {
                if (!t) return null;
                t = t.replace('onwards', '').trim();
                let modifier = t.includes('pm') ? 'pm' : 'am';
                let time = t.replace(/[ap]m/g, '').trim();
                let parts = time.split(':');
                let hours = parseInt(parts[0]);
                let minutes = parts[1] ? parseInt(parts[1]) : 0;
                
                if (hours === 12) hours = 0;
                if (modifier === 'pm') hours += 12;
                return { h: hours, m: minutes };
            }

            const startObj = convertTo24h(times[0]);
            let endObj = convertTo24h(times[1]);

            if (timeStr.toLowerCase().includes('onwards')) {
                endObj = { h: 23, m: 59 };
            } else if (!endObj) {
                endObj = { ...startObj, h: (startObj.h + 1) % 24 };
            }

            return {
                start: new Date(year, month, day, startObj.h, startObj.m),
                end: new Date(year, month, day, endObj.h, endObj.m)
            };
        }

        function renderDay(index) {
            if (!scheduleData || scheduleData.length === 0) return;
            activeDayIndex = index;
            const data = scheduleData[index];
            const now = new Date();
            
            document.body.classList.toggle('is-conference', data.isConf);
            document.getElementById('header-bg-text').innerText = data.month;
            
            if (data.isConf) {
                document.getElementById('current-day-display').innerText = data.title;
                document.getElementById('day-theme-title').innerText = `Day ${String(data.day).padStart(2, '0')} • ${data.date}`;
            } else {
                document.getElementById('current-day-display').innerText = data.date;
                const dayNum = String(data.day).padStart(2, '0');
                document.getElementById('day-theme-title').innerText = `Day ${dayNum} • ${data.title}`;
            }
            
            const badge = document.getElementById('phase-badge');
            badge.innerText = data.isConf ? "Main Conference" : data.phase;
            badge.className = "phase-badge " + (data.isConf ? "badge-main" : (data.day > 9 ? "badge-post" : "badge-pre"));

            updateStepper();

            const container = document.getElementById('main-timeline');
            
            let html = data.events.map(ev => {
                const isSpeakerEvent = !!ev.speaker;
                let isLive = false, isPast = false;
                if (ev.time) {
                    try {
                        const { start, end } = parseEventTime(ev.time, data.date);
                        isLive = now >= start && now <= end;
                        isPast = now > end;
                    } catch(e) { console.error(`Could not parse time: ${ev.time}`, e); }
                }

                const speakers = ev.speaker ? ev.speaker.split(/ & | &amp; | and /i) : [];
                const speakerUnits = speakers.map(s => {
                    const name = s.trim();
                    const seed = encodeURIComponent(name);
                    const imgUrl = `https://api.dicebear.com/7.x/initials/svg?seed=${seed}&backgroundColor=b8860b,5d0e11&fontFamily=Playfair+Display&fontWeight=700`;
                    return `<div class="flex flex-col items-start gap-3 text-left shrink-0 max-w-[180px]">
                            <img src="${imgUrl}" alt="${name}" class="w-44 h-44 rounded-2xl object-cover bg-slate-100 border-2 border-white shadow-sm">
                            <span class="text-lg font-bold text-slate-700 leading-tight">${name}</span>
                        </div>`;
                }).join('');

                const ytVisible = (ev.ytLink !== undefined) && (isLive || isPast);
                const isConfDay = data.isConf;
                
                return `
                    <div class="timeline-item">
                        <div class="timeline-visual ${isConfDay ? 'type-conference' : 'type-satram'}">
                            ${isConfDay ? `<div class="diya-node ${isLive ? 'active' : ''}"><div class="diya-flame"></div></div>` : `<div class="flower-node ${isLive ? 'active' : ''}"><div class="flower-head"></div></div>`}
                        </div>
                        <div class="timeline-content pb-14">
                            <div class="mb-2 flex flex-wrap items-start gap-x-2 gap-y-1">
                                <span class="meta-text time-text">${ev.time}</span>
                                ${ev.loc && ev.loc !== '-' ? `<div class="flex items-start gap-1.5 meta-text loc-text max-w-full"><span class="flex-1">${ev.loc}</span></div>` : ''}
                                ${isLive ? '<span class="px-2 py-0.5 bg-red-600 text-white text-[9px] font-black rounded-full animate-pulse uppercase tracking-wider">LIVE</span>' : ''}
                            </div>
                            <h3 class="event-name">${ev.title}</h3>
                            
                            ${ytVisible ? `
                                <div class="flex">
                                    <a href="https://youtube.com" target="_blank" class="yt-link ${isLive ? '!text-red-500' : '!text-slate-400 opacity-60'}">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
                                        ${isLive ? 'Watch Live' : 'Watch Replay'}
                                    </a>
                                </div>` : ''}

                            ${isSpeakerEvent ? `
                                <div class="speaker-card flex flex-col sm:flex-row items-start gap-6 !p-4 !mt-3">
                                    <div class="flex flex-wrap gap-6 shrink-0 justify-start">${speakerUnits}</div>
                                    ${isConfDay ? `<div class="flex-1 min-w-0 pt-2 border-t border-dashed border-slate-200 sm:border-0 sm:pt-0"><p class="bio-text text-sm leading-relaxed">${ev.bio || 'Scholar details and insights for this session are being finalized.'}</p></div>` : ''}
                                </div>` : ''}
                        </div>
                    </div>`;
            }).join('');
            
            container.innerHTML = html;
        }

        function updateStepper() {
            if (!scheduleData || scheduleData.length === 0) return;
            document.getElementById('prev-day-btn').disabled = activeDayIndex <= 0;
            document.getElementById('next-day-btn').disabled = activeDayIndex >= scheduleData.length - 1;
        }

        function changeDay(offset) {
            const newIndex = activeDayIndex + offset;
            if (newIndex >= 0 && newIndex < scheduleData.length) {
                renderDay(newIndex);
                const nav = document.querySelector('.sticky-nav');
                const offsetTop = nav.getBoundingClientRect().height + 20;
                const timeline = document.getElementById('main-timeline');
                const top = timeline.getBoundingClientRect().top + window.scrollY - offsetTop;
                window.scrollTo({ top: top, behavior: 'smooth' });
            }
        }

        function nextDay() { changeDay(1); }
        function prevDay() { changeDay(-1); }

        function getInitialDayIndex() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const day = now.getDate();

            if (year === 2026) {
                if (month === 2 && day >= 28) return day - 28; // March
                if (month === 3 && day <= 7) return day + 3;  // April
            }
            return 0;
        }

        function initFlowerRain() {
            const container = document.getElementById('flower-rain');
            if (!container) return;
            const createFlower = () => {
                const flower = document.createElement('div');
                flower.classList.add('falling-flower');
                flower.style.left = `${Math.random() * 100}%`;
                flower.style.animationDuration = `${Math.random() * 5 + 5}s`;
                flower.style.opacity = Math.random() * 0.5 + 0.3;
                const size = Math.random() * 10 + 10;
                flower.style.width = `${size}px`;
                flower.style.height = `${size}px`;
                container.appendChild(flower);
                setTimeout(() => flower.remove(), 10000);
            };
            setInterval(createFlower, 400);
        }

        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
