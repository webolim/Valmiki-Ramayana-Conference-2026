<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valmiki Ramayana Conference No. 3 | WEBOLIM</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:ital,wght@0,700;0,900;1,700&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #B8860B;
            --maroon: #5D0E11;
            --slate-border: #E2E8F0;
            --text-main: #1E293B;
            --text-muted: #64748B;
            --bg-page: #FFFFFF;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-page);
            color: var(--text-main);
            scroll-behavior: smooth;
        }

        .font-display { font-family: 'Playfair Display', serif; }

        /* --- HERO --- */
        .hero-bg {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1542332213-31f87348057f?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
        }

        /* --- THEMES --- */
        body.is-conference { background-color: #FFF9E3; color: #5D0E11; }
        body.is-conference .timeline-dot { border-color: #5D0E11; background: #FFF9E3; }
        body.is-conference .timeline-dot.filled { background: #5D0E11; }
        body.is-conference .speaker-card { background: rgba(255, 255, 255, 0.4); border: 1px solid rgba(93, 14, 17, 0.1); }
        body.is-conference .timeline-visual::before { background: rgba(93, 14, 17, 0.2); }
        body.is-conference #header-bg-text { color: #5D0E11; opacity: 0.05; }
        body.is-conference .meta-text.time-text { color: #B8860B; }
        body.is-conference .meta-text.loc-text { color: #5D0E11; }

        /* --- DAY STEPPER NAV --- */
        .step-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 1px solid var(--slate-border);
            background: white;
            color: var(--text-muted);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            flex-shrink: 0;
        }
        .step-btn:hover:not(:disabled) {
            border-color: var(--gold);
            color: var(--gold);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(184, 134, 11, 0.1);
        }
        .step-btn:disabled {
            opacity: 0.2;
            cursor: not-allowed;
        }
        
        body.is-conference .step-btn {
            background: rgba(93, 14, 17, 0.05);
            border-color: rgba(93, 14, 17, 0.1);
            color: #5D0E11;
        }
        body.is-conference .step-btn:hover:not(:disabled) {
            background: #5D0E11;
            color: #FFF9E3;
            border-color: #5D0E11;
        }

        /* --- TIMELINE --- */
        .timeline-wrapper { position: relative; }
        .timeline-item { display: grid; grid-template-columns: 32px 1fr; gap: 24px; position: relative; }
        .timeline-visual { position: relative; display: flex; justify-content: center; height: 100%; }
        .timeline-visual::before { content: ''; position: absolute; top: 0; bottom: 0; width: 2px; background: var(--slate-border); z-index: 1; }
        .timeline-item:first-child .timeline-visual::before { top: 16px; }
        .timeline-item:last-child .timeline-visual::before { bottom: calc(100% - 16px); }

        .timeline-dot {
            position: absolute;
            top: 8px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            z-index: 10;
            border: 2px solid var(--gold);
            background: white;
            box-shadow: 0 0 0 4px white;
        }
        body.is-conference .timeline-dot { box-shadow: 0 0 0 4px #FFF9E3; }
        .timeline-dot.filled { background: var(--gold); }

        /* --- LIVE STATUS --- */
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }

        .timeline-dot.is-live {
            background: #ef4444 !important;
            border-color: #ef4444 !important;
            animation: pulse-red 2s infinite;
        }

        /* --- TYPOGRAPHY --- */
        .meta-text { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.15em; display: inline-block; }
        .time-text { color: var(--gold); }
        .loc-text { color: var(--maroon); }

        .event-name { font-size: 1.6rem; font-weight: 800; color: inherit; line-height: 1.2; margin-bottom: 0.5rem; letter-spacing: -0.02em; }

        .speaker-card { 
            display: flex; 
            flex-direction: column;
            gap: 1.25rem; 
            align-items: flex-start; 
            margin-top: 1.5rem; 
            padding: 1.5rem; 
            background: #fdfdfd; 
            border: 1px solid #eef2f6;
            border-radius: 1rem; 
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.03);
        }
        @media (min-width: 640px) {
            .speaker-card { flex-direction: row; }
        }
        .speaker-photo { 
            width: 56px; 
            height: 56px; 
            border-radius: 1rem; 
            object-fit: cover; 
            background: #f1f5f9; 
            border: 2px solid white; 
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); 
            flex-shrink: 0; 
        }
        .speaker-info { flex: 1; }
        .bio-text { color: var(--text-muted); font-size: 0.9rem; line-height: 1.7; font-weight: 400; }
        body.is-conference .bio-text { color: rgba(93, 14, 17, 0.8); }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .phase-badge { font-size: 0.65rem; padding: 0.25rem 0.6rem; border-radius: 999px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge-pre { background: #fee2e2; color: #991b1b; }
        .badge-main { background: #fef3c7; color: #92400e; }
        .badge-post { background: #f1f5f9; color: #475569; }

        /* --- STICKY NAV --- */
        .sticky-nav {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--slate-border);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05);
            transition: all 0.3s ease;
        }
        body.is-conference .sticky-nav {
            background: rgba(255, 249, 227, 0.98);
            border-bottom-color: rgba(93, 14, 17, 0.1);
        }

        .yt-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.75rem;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #ef4444; /* YouTube Red */
            transition: all 0.2s;
        }
        .yt-link:hover { opacity: 0.8; transform: translateX(2px); }
        body.is-conference .yt-link { color: #5D0E11; }
        .hidden { display: none; }
    </style>
</head>
<body class="antialiased">

    <!-- Grand Hero -->
    <section class="hero-bg text-white py-24 px-6 overflow-hidden">
        <div class="max-w-6xl mx-auto flex flex-col lg:flex-row items-center gap-16">
            <div class="flex-1">
                <div class="inline-block px-4 py-1.5 bg-gold/20 border border-gold/30 rounded-full mb-6">
                    <p class="text-gold font-bold uppercase tracking-[0.2em] text-[10px]">WEBOLIM presents SRI RAMAYANA SATRAM 2026</p>
                </div>
                <h1 class="font-display text-5xl md:text-8xl font-black leading-[0.9] mb-8 tracking-tighter">
                    Valmiki <br>
                    Ramayana <br>
                    <span class="text-gold">Conference</span><br>
                    No. 3
                </h1>
                <p class="text-xl md:text-2xl text-slate-200 font-medium max-w-xl leading-snug">
                    Recensions / Readings and Commentaries of Valmiki Ramayana
                </p>
            </div>

            <!-- Overview Card -->
            <div class="w-full lg:w-[480px] shrink-0">
                <div class="bg-white/5 backdrop-blur-3xl p-10 rounded-[2.5rem] border border-white/20 shadow-2xl">
                    <div class="space-y-4 mb-10">
                        <!-- Pre Satram -->
                        <div class="flex items-center gap-4 p-3 rounded-xl hover:bg-white/5 transition">
                            <span class="w-28 text-[11px] font-black uppercase tracking-[0.2em] text-slate-400">Pre-Satram</span>
                            <p class="text-base font-bold text-white">Mar 28 – Apr 03</p>
                        </div>
                        
                        <!-- Main Conference Highlight -->
                        <div class="flex items-center gap-4 p-5 bg-gold/10 border border-gold/30 rounded-2xl shadow-[0_0_20px_rgba(184,134,11,0.15)] scale-105">
                            <span class="w-28 text-[11px] font-black uppercase tracking-[0.2em] text-gold">Conference</span>
                            <div>
                                <p class="text-xl font-black text-white leading-none">Apr 04 – 05</p>
                            </div>
                        </div>

                        <!-- Post Satram -->
                        <div class="flex items-center gap-4 p-3 rounded-xl hover:bg-white/5 transition">
                            <span class="w-28 text-[11px] font-black uppercase tracking-[0.2em] text-slate-400">Post-Satram</span>
                            <p class="text-base font-bold text-white">Apr 06 – 07</p>
                        </div>
                    </div>

                    <!-- Details Section -->
                    <div class="pt-10 border-t border-white/10 space-y-8">
                        <div>
                            <p class="text-[11px] font-black uppercase tracking-[0.2em] text-slate-400 mb-3">Venue</p>
                            <p class="text-sm font-bold leading-relaxed text-slate-100">
                                Srimad Valmiki Ashrama WEBOLIM,<br>
                                Survey No. 11/3, Ragihalli Village,<br>
                                Bengaluru, Karnataka 560083
                            </p>
                        </div>
                        <div class="p-4 bg-white/5 rounded-2xl border border-white/10">
                            <p class="text-[11px] font-black uppercase tracking-[0.2em] text-gold mb-3">Accommodation & Support</p>
                            <div class="space-y-2">
                                <p class="text-sm font-bold text-white flex items-center gap-2">
                                    <span class="text-gold">T:</span> 9369637283
                                </p>
                                <p class="text-sm font-bold text-white flex items-center gap-2">
                                    <span class="text-gold">E:</span> webolimclasses@gmail.com
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>



    <!-- Static Month/Year Header -->
    <header class="pt-20 pb-4 px-6">
        <div class="max-w-4xl mx-auto">
            <h1 id="header-bg-text" class="text-slate-200 font-black text-6xl md:text-8xl uppercase tracking-tighter opacity-20 select-none">March 2026</h1>
            
            <div class="flex flex-col md:flex-row md:items-center gap-3 mt-8">
                <div class="flex items-center gap-3">
                    <span id="phase-badge" class="phase-badge badge-pre">Pre-Conference Satram</span>
                    <span class="hidden md:inline text-slate-300">|</span>
                </div>
                <span id="phase-label" class="meta-text !mb-0 text-gold font-bold leading-relaxed block md:inline-block">Recensions / Readings and Commentaries of Valmiki Ramayana</span>
            </div>
        </div>
    </header>

    <!-- Sticky Day Navigation -->
    <nav class="sticky-nav py-6 px-6">
        <div class="max-w-4xl mx-auto">
            <div class="relative z-10">
                <div class="flex items-center justify-between gap-6">
                    <button id="prev-day-btn" onclick="prevDay()" class="step-btn" title="Previous Day" aria-label="Previous Day">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                    </button>
                    
                    <div class="text-center flex-1 px-4">
                        <p id="day-theme-title" class="text-slate-400 font-bold uppercase tracking-[0.15em] text-[10px] md:text-xs mb-1">Day 01 • Inauguration Day</p>
                        <h2 id="current-day-display" class="font-display text-2xl md:text-5xl font-bold leading-tight">Saturday, Mar 28</h2>
                    </div>

                    <button id="next-day-btn" onclick="nextDay()" class="step-btn" title="Next Day" aria-label="Next Day">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Content Area -->
    <main class="py-16 px-6">
        <div class="max-w-4xl mx-auto">
            <div class="timeline-wrapper" id="main-timeline">
                <div id="loading-spinner" class="flex justify-center items-center py-20" role="status">
                    <svg class="animate-spin h-10 w-10 time-text" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                        </path>
                    </svg>
                </div>
            </div>
        </div>
    </main>

    <footer class="py-20 px-6 border-t border-slate-100 text-center bg-slate-50">
        <p class="font-display text-2xl text-slate-400 mb-2">WEBOLIM</p>
        <p class="text-[10px] text-slate-400 uppercase tracking-[0.3em] font-bold">Valmiki Ramayana Conference No. 3</p>
        <div class="mt-8 text-slate-400 text-xs flex flex-col items-center gap-2">
            <p>Srimad Valmiki Ashrama WEBOLIM</p>
            <p>Survey No. 11/3, Ragihalli Village, Bengaluru-560083</p>
        </div>
    </footer>

    <script>
        let activeDayIndex = 0;
        let scheduleData = [];

        function parseEventTime(timeStr, dayDate) {
            const year = 2026;
            const dateParts = dayDate.split(', ')[1].split(' '); 
            const monthMap = { "Mar": 2, "Apr": 3 };
            const month = monthMap[dateParts[0]];
            const day = parseInt(dateParts[1]);
            const times = timeStr.toLowerCase().split(' - ');
            
            function convertTo24h(t) {
                if (!t) return null;
                let [time, modifier] = [t.replace(/[ap]m/g, '').trim(), t.includes('pm') ? 'pm' : 'am'];
                let parts = time.split(':');
                let hours = parseInt(parts[0]);
                let minutes = parts[1] ? parseInt(parts[1]) : 0;
                if (hours === 12) hours = 0;
                if (modifier === 'pm') hours += 12;
                return { h: hours, m: minutes };
            }

            const startObj = convertTo24h(times[0]);
            let endObj = convertTo24h(times[1]);

            if (timeStr.includes('onwards')) {
                endObj = { h: 23, m: 59 };
            } else if (!endObj) {
                endObj = { ...startObj, h: (startObj.h + 1) % 24 };
            }

            return {
                start: new Date(Date.UTC(year, month, day, startObj.h - 5, startObj.m - 30)),
                end: new Date(Date.UTC(year, month, day, endObj.h - 5, endObj.m - 30))
            };
        }

        function renderDay(index) {
            activeDayIndex = index;
            const data = scheduleData[index];
            const now = new Date().getTime();
            
            document.body.classList.toggle('is-conference', data.isConf);
            document.getElementById('header-bg-text').innerText = data.month;
            
            if (data.isConf) {
                document.getElementById('current-day-display').innerText = data.title;
                document.getElementById('day-theme-title').innerText = `Day ${String(data.day).padStart(2, '0')} • ${data.date}`;
            } else {
                document.getElementById('current-day-display').innerText = data.date;
                const dayNum = String(data.day).padStart(2, '0');
                document.getElementById('day-theme-title').innerText = `Day ${dayNum} • ${data.title}`;
            }
            
            const badge = document.getElementById('phase-badge');
            badge.innerText = data.isConf ? "Main Conference" : data.phase;
            badge.className = "phase-badge " + (data.isConf ? "badge-main" : (data.day > 9 ? "badge-post" : "badge-pre"));

            updateStepper();

            const container = document.getElementById('main-timeline');
            container.innerHTML = data.events.map(ev => {
                const isSpeakerEvent = !!ev.speaker;
                const isSpecialTime = ev.time && ev.time.includes("7:30 pm - 8:30 pm");
                const isAbhishekham = ev.title.toLowerCase().includes("abhishekham");
                const isParayanam = ev.title.toLowerCase().includes("parayanam");
                const shouldFill = isSpeakerEvent || isSpecialTime || isAbhishekham || isParayanam;

                const isYTEligible = (isSpeakerEvent || 
                                     isAbhishekham || 
                                     ev.title.toLowerCase().includes("inauguration") || 
                                     ev.title.toLowerCase().includes("dolotsavam") || 
                                     isSpecialTime) && !isParayanam;

                let isLive = false;
                let isPast = false;
                if (ev.time) {
                    try {
                        const { start, end } = parseEventTime(ev.time, data.date);
                        isLive = now >= start.getTime() && now <= end.getTime();
                        isPast = now > end.getTime();
                    } catch(e) {}
                }

                const speakers = ev.speaker ? ev.speaker.split(/ & | &amp; | and /i) : [];
                const speakerPhotos = speakers.map((s, i) => {
                    const seed = encodeURIComponent(s.trim());
                    const imgUrl = (ev.speakerImg && ev.speakerImg[i]) ? ev.speakerImg[i] : `https://api.dicebear.com/7.x/initials/svg?seed=${seed}&backgroundColor=b8860b,5d0e11&fontFamily=Playfair+Display&fontWeight=700`;
                    return `<img src="${imgUrl}" alt="${s.trim()}" class="speaker-photo">`;
                }).join('');

                return `
                    <div class="timeline-item">
                        <div class="timeline-visual">
                            <div class="timeline-dot ${isLive ? 'is-live' : (shouldFill ? 'filled' : '')}"></div>
                        </div>
                        <div class="timeline-content pb-14">
                            <div class="mb-2">
                                <span class="meta-text time-text">${ev.time}</span>
                                ${ev.loc && ev.loc !== '-' ? `<span class="meta-text loc-text"> • ${ev.loc}</span>` : ''}
                                ${isLive ? '<span class="ml-2 px-2 py-0.5 bg-red-500 text-white text-[9px] font-black rounded-full animate-pulse">LIVE NOW</span>' : ''}
                            </div>
                            <h3 class="event-name">${ev.title}</h3>
                            
                            ${isYTEligible && (isLive || isPast) ? `
                                <div class="flex">
                                    <a href="${ev.ytLink || '#'}" target="_blank" class="yt-link ${isLive ? '!text-red-500' : '!text-slate-400 opacity-60'}">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
                                        ${isLive ? 'Watch Live on YouTube' : 'Watch recording on YouTube'}
                                    </a>
                                </div>
                            ` : ''}

                            ${isSpeakerEvent ? `
                                <div class="speaker-card">
                                    <div class="flex gap-4 mb-2 sm:mb-0">
                                        ${speakerPhotos}
                                    </div>
                                    <div class="speaker-info">
                                        <div class="speaker-name text-gold font-bold mb-1">${ev.speaker}</div>
                                        <p class="bio-text">${ev.bio || 'Scholar details and insights for this session are being finalized and will be updated shortly.'}</p>
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateStepper() {
            const prevIdx = activeDayIndex - 1;
            const nextIdx = activeDayIndex + 1;
            
            const prevBtn = document.getElementById('prev-day-btn');
            const nextBtn = document.getElementById('next-day-btn');
            
            if (prevBtn) prevBtn.style.visibility = prevIdx >= 0 ? 'visible' : 'hidden';
            if (nextBtn) nextBtn.style.visibility = nextIdx < scheduleData.length ? 'visible' : 'hidden';
        }

        function nextDay() {
            if (activeDayIndex < scheduleData.length - 1) {
                renderDay(activeDayIndex + 1);
                // Scroll to the top of the sticky navigation area
                const stickyNav = document.querySelector('.sticky-nav');
                window.scrollTo({ top: stickyNav.offsetTop, behavior: 'smooth' });
            }
        }

        function prevDay() {
            if (activeDayIndex > 0) {
                renderDay(activeDayIndex - 1);
                // Scroll to the top of the sticky navigation area
                const stickyNav = document.querySelector('.sticky-nav');
                window.scrollTo({ top: stickyNav.offsetTop, behavior: 'smooth' });
            }
        }

        function getInitialDayIndex() {
            // Get current time in IST
            const now = new Date();
            const utcTime = now.getTime() + (now.getTimezoneOffset() * 60000);
            const istOffset = 5.5 * 3600000;
            const istDate = new Date(utcTime + istOffset);
            
            const year = istDate.getFullYear();
            const month = istDate.getMonth() + 1; // 0-indexed
            const day = istDate.getDate();

            if (year === 2026) {
                if (month === 3) { // March
                    if (day >= 28 && day <= 31) {
                        return day - 28; // Mar 28 -> index 0
                    }
                } else if (month === 4) { // April
                    if (day >= 1 && day <= 7) {
                        // Apr 1 is index 4 (since index 3 is Mar 31)
                        return day + 3; 
                    }
                }
            }
            return 0; // Default to Day 1
        }

        document.addEventListener('DOMContentLoaded', async () => {
            const spinner = document.getElementById('loading-spinner');
            try {
                const response = await fetch('schedule.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                scheduleData = await response.json();
                renderDay(getInitialDayIndex());
                setInterval(() => renderDay(activeDayIndex), 30000);
            } catch (error) {
                console.error('Error loading schedule:', error);
                document.getElementById('main-timeline').textContent = 'Could not load schedule. Please try refreshing the page.';
            } finally {
                if (spinner) {
                    spinner.classList.add('hidden');
                }
            }
        });
    </script>
</body>
</html>
